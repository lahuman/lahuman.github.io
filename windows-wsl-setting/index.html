<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>windows에 wsl 설치하고 설정하기 &#8211; lahuman</title> <meta name="description" content="열심히 사는 아저씨"> <meta name="keywords" content="windows, wsl, vscode"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://lahuman.github.io/assets/img/logo.png"> <meta name="twitter:title" content="windows에 wsl 설치하고 설정하기"> <meta name="twitter:description" content="vscode의 remote WSL까지 연결하면 신세계가 열린다."> <!-- Open Graph --> <meta property="og:locale" content="ko_KR"> <meta property="og:type" content="article"> <meta property="og:title" content="windows에 wsl 설치하고 설정하기"> <meta property="og:description" content="vscode의 remote WSL까지 연결하면 신세계가 열린다."> <meta property="og:url" content="https://lahuman.github.io/windows-wsl-setting/"> <meta property="og:site_name" content="lahuman"> <meta property="og:image" content="https://lahuman.github.io/assets/img/logo.png"> <link rel="canonical" href="https://lahuman.github.io/windows-wsl-setting/"> <link href="https://lahuman.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="lahuman Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://lahuman.github.io/assets/css/main.css"> <!-- JS --> <script src="https://lahuman.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://lahuman.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://lahuman.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://lahuman.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://lahuman.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://lahuman.github.io/favicon.png" /> <link rel="shortcut icon" href="https://lahuman.github.io/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(https://lahuman.github.io/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://lahuman.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://lahuman.github.io/assets/img/logo.png" alt="lahuman photo" class="author-photo"> <h4>lahuman</h4> <p>열심히 사는 아저씨</p> </li> <li><a href="https://lahuman.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://facebook.com/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://linkedin.com/in/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://lahuman.github.io/posts/">All Posts</a></li> <li><a href="https://lahuman.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="https://lahuman.github.io/projects/" >Projects</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>windows에 wsl 설치하고 설정하기</h1> <h4>26 Jan 2020</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~4 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://lahuman.github.io/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="windows에-wsl-설치하고-설정하기">windows에 wsl 설치하고 설정하기</h1> <p>일반적으로 windows OS에서 linux 환경을 사용하기 위해서는 vmware를 이용해 OS를 설치하고 활용했다. 장단점이 있지만, 기본적으로 OS 설치 비용 + 디스크, 메모리 등을 쉐어 하기 때문에 호스트 OS에도 부담이 되는 방식이다.</p> <p>2년전쯤 WSL을 설치하려고 시도하다가 업데이트가 잘 안되서 실패 했었다.</p> <p>요즘은 쉽게 설치가 된다고 하여 다시 재도전을 해보았다.</p> <h2 id="제어판에서-linux용-windows-하위-시스템-사용-설정">제어판에서 <strong>Linux용 Windows 하위 시스템</strong> 사용 설정</h2> <ol> <li>제어판을 연다.</li> <li>프로그램을 선택한다.</li> <li>Windows 기능 켜기/끄기 선택</li> <li>Linux용 Windows 하위 시스템 켜기</li> <li>재부팅 한다.</li> </ol> <p><img src="/assets/img/post_img/w_w_setting.png" alt="" /></p> <h2 id="ubuntu-1804-설치">Ubuntu 18.04 설치</h2> <ol> <li>Microsoft Store에서 Linux를 검색한다.</li> <li>Ubuntu 18.04 LTS를 선택한다.</li> </ol> <blockquote> <p>처음에 Ubuntu를 설치했더니, <strong>apt update</strong> 부터 오류가 발생했다.</p> </blockquote> <p><img src="/assets/img/post_img/w_w_msstore_ubuntu.png" alt="" /></p> <p>설치가 끝나면 실행을 한다.</p> <p>실행을 하면 사용자 ID와 Password를 입력하면 된다.</p> <p><img src="/assets/img/post_img/w_w_ubuntu18.04.png" alt="" /></p> <h2 id="nvm-설치-하기">nvm 설치 하기</h2> <p>현재(2020.01.26)기준 최신 버젼은 0.35.2이다. 다음 명령어를 이용해서 설치 한다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 13527  100 13527    0     0  13888      0 --:--:-- --:--:-- --:--:-- 13873
=&gt; Downloading nvm from git to '/home/lahuman/.nvm'
=&gt; Cloning into '/home/lahuman/.nvm'...
remote: Enumerating objects: 288, done.
remote: Counting objects: 100% (288/288), done.
remote: Compressing objects: 100% (258/258), done.
remote: Total 288 (delta 35), reused 95 (delta 18), pack-reused 0
Receiving objects: 100% (288/288), 146.70 KiB | 408.00 KiB/s, done.
Resolving deltas: 100% (35/35), done.
=&gt; Compressing and cleaning up git repository

=&gt; Appending nvm source string to /home/lahuman/.bashrc
=&gt; Appending bash_completion source string to /home/lahuman/.bashrc
: not foundram Files/nodejs/npm: 3: /mnt/c/Program Files/nodejs/npm:
: not foundram Files/nodejs/npm: 5: /mnt/c/Program Files/nodejs/npm:
/mnt/c/Program Files/nodejs/npm: 6: /mnt/c/Program Files/nodejs/npm: Syntax error: word unexpected (expecting "in")
=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] &amp;&amp; \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
</code></pre></div></div> <p>설치가 끝나면 마지막 3줄을 복사해서 붙이면 설치는 마무리 된다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export NVM_DIR="$HOME/.nvm"
$ [ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh" 
$ [ -s "$NVM_DIR/bash_completion" ] &amp;&amp; \. "$NVM_DIR/bash_completion" 
</code></pre></div></div> <p><strong>nvm list</strong>명령어를 이용해서 현재 설치된 것을 확인하면, 다음과 같이 아무것도 설치 되어 있지 않다는 것을 확인 할 수 있다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm list
            N/A
iojs -&gt; N/A (default)
node -&gt; stable (-&gt; N/A) (default)
unstable -&gt; N/A (default)
</code></pre></div></div> <p><strong>nvm install node</strong> 명령어를 이용해서 node를 설치 할 수 있다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nvm install node
Downloading and installing node v13.7.0...
Downloading https://nodejs.org/dist/v13.7.0/node-v13.7.0-linux-x64.tar.xz...
################################################################################################################# 100.0%
Computing checksum with sha256sum
Checksums matched!
Now using node v13.7.0 (npm v6.13.6)
Creating default alias: default -&gt; node (-&gt; v13.7.0)
$ node -v
v13.7.0
$ npm -v
6.13.6
</code></pre></div></div> <p>설치 버젼을 확인하여, 설치가 잘된 것을 확인한다.</p> <h2 id="docker-설치-하기">docker 설치 하기</h2> <p>기본적으로 WSL은 docker 데몬을 지원 하지 않는다.</p> <p>하지만! WSL2 라면 지원을 한다.</p> <h3 id="wsl2설치">WSL2설치</h3> <blockquote> <p>WSL2란, 최신의 가상화 기술을 사용하여 경량 유틸리티 VM(가상 머신) 내에서 Linux 커널을 실행합니다. 기존 VM과 다르게, WSL1과 동일한 사용자 환경을 유지 하면서 백그라운드에서 관리되고 실행됩니다.</p> </blockquote> <p>우선 Hyper-v를 사용하도록 설정 해야 한다.</p> <ol> <li>BIOS 설정 <img src="https://i2.wp.com/www.nextofwindows.com/wp-content/uploads/2015/05/6116.HVW8a.jpg" alt="" /></li> <li>Hyper-V 설정 <img src="/assets/img/post_img/w_w_hyper-v.png" alt="" /></li> <li>wsl2 설치</li> </ol> <blockquote> <p>WSL 2는 Windows 10 빌드 18917 이상에서만 사용할 수 있음 Windows 참가자 프로그램을 참가하여야 합니다.</p> </blockquote> <p><img src="/assets/img/post_img/w_w_update.png" alt="" /></p> <p>이후 업데이트(인터넷 속도에 따라 2시간 정도 걸림)를 모두 하면, 빌드 버젼이 2020.01.27기준 10.0.19041.21이다. 버전을 확인하는 방법은 cmd 명령창에서 <strong>ver</strong> 명령어로 확인이 가능합니다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ver

Microsoft Windows [Version 10.0.19041.21]
</code></pre></div></div> <p>이후 가상 컴퓨터 플랫폼을 사용하도록 powserShell에서 다음 명령어를 입력한다. 주의 할것은 powserShell을 관리자 권한으로 실행해야 한다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
# dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre></div></div> <blockquote> <p>2020년 5월 20일 추가 사항 WSL2로 변환하기 위해서 <a href="https://docs.microsoft.com/ko-kr/windows/wsl/wsl2-kernel">다음</a>주소에서 실행파일을 받아서 설치해야 한다.</p> </blockquote> <p>이후 powserShell에서 wsl의 배포판 모드를 변경한다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># wsl --set-version &lt;Distro&gt; 2
</code></pre></div></div> <p><img src="/assets/img/post_img/w_w_wsl2.jpg" alt="" /></p> <blockquote> <p>이제 docker를 사용할 준비가 완료 되었습니다.</p> </blockquote> <h2 id="docker-설치">docker 설치</h2> <p>docker container를 설치해보자, 설치는 다음의 명령어를 이용해서 할 수 있다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
$ sudo apt-key fingerprint 0EBFCD88
$ sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
$ sudo apt-get update
$ sudo apt-get install docker-ce
</code></pre></div></div> <p>설치가 완료 되었으면, docker service를 root 권한으로 실행하여야 한다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo service docker start
 * Starting Docker: docker                                                                                       [ OK ]
</code></pre></div></div> <p>기본적으로 docker는 root 권한으로만 실행할 수 있다. docker 명령어를 이용할 때마다, sudo를 붙이는게 귀찮다면, 다음과 같이 사용자를 docker그룹에 추가하면 된다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo usermod -aG docker $(whoami)
# 터미널 종료후 다시 열어야 한다.
$ exit
</code></pre></div></div> <p>샘플 docker 실행 테스트</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -d --name react-app -p 80:80 lahuman/test-react-app
Unable to find image 'lahuman/test-react-app:latest' locally
latest: Pulling from lahuman/test-react-app
e7c96db7181b: Pull complete
8985e402e050: Pull complete
41c1b09855ea: Pull complete
Digest: sha256:bb4d447b8a51845510671f731d68a4b944e681fe856bef670102bb97f904895d
Status: Downloaded newer image for lahuman/test-react-app:latest
5e0cd323d4c97682e4ecb3103555ff9c9ff9d10ffd2bc30fe9591a8b8157fad1

$ docker ps
CONTAINER ID        IMAGE                    COMMAND                  CREATED             STATUS              PORTS                NAMES
5e0cd323d4c9        lahuman/test-react-app   "nginx -g 'daemon of…"   5 seconds ago       Up 3 seconds        0.0.0.0:80-&gt;80/tcp   react-app
</code></pre></div></div> <h2 id="vscode-와-연동-하기">VSCODE 와 연동 하기</h2> <p>vscode에서 Remote-WSL plugin을 설치 한다.</p> <p>이후 F1을 눌러 <strong>Remote-WSL: new Windows</strong>를 입력 후 클릭한다.</p> <p>새창이 뜨고, 뜬 새창에서 터미널이나, 파일 exporler를 열면 wsl 안의 내용을 확인 가능하다.</p> <h2 id="ubuntu-삭제-하기">ubuntu 삭제 하기</h2> <p>설치된 wsl의 OS를 삭제하기 위해서는 <strong>앱 및 기능</strong>으로 이동해서 ms store에서 설치했던, Ubuntu를 찾아서 제거 하면 된다.</p> <p><img src="/assets/img/post_img/w_w_ubuntu_remove.png" alt="" /></p> <h2 id="참고-자료">참고 자료</h2> <ul> <li><a href="https://www.windowscentral.com/install-windows-subsystem-linux-windows-10">How to install Windows Subsystem for Linux (WSL) on Windows 10</a></li> <li><a href="https://docs.microsoft.com/ko-kr/windows/wsl/wsl2-install?fbclid=IwAR29NZ7vEdgWpYbvtXn0PhTCrD2udghu9H3r-9mtc64tDRAna7QOELDvMPk">WSL 2의 설치 지침</a></li> <li><a href="https://subhankarsarkar.com/wsl2-for-containerised-dot-net-core-development-using-docker/?fbclid=IwAR3QFlL-sgSbWDk4wYGgsaTJ5-st4VgxvNMuuaRYrGQ4EMneAznuMyjPBsk">Build Containerised .NET Core Application using Docker on Windows Subsystem for Linux (WSL) 2</a></li> <li><a href="https://docs.microsoft.com/ko-kr/windows/nodejs/setup-on-wsl2?fbclid=IwAR0E6rXQNJRPIt5Ki4tD49bkNvTBCRn-Wk7BpkTd-jYdY-aoT240lfr5SbY">WSL 2를 사용 하 여 node.js 개발 환경 설정</a></li> <li><a href="https://docs.microsoft.com/ko-kr/virtualization/hyper-v-on-windows/quick-start/quick-create-virtual-machine?fbclid=IwAR0W7qMdgawtOTZzJ-qruiceGyfrB7aKN-hJj8cd00OQkozebeXL6dg5mSs">Hyper-V를 사용하여 가상 컴퓨터 만들기</a></li> </ul> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://lahuman.github.io/tags/#windows" title="Pages tagged windows" class="tag"><span class="term">windows</span></a><a href="https://lahuman.github.io/tags/#wsl" title="Pages tagged wsl" class="tag"><span class="term">wsl</span></a><a href="https://lahuman.github.io/tags/#vscode" title="Pages tagged vscode" class="tag"><span class="term">vscode</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://lahuman.github.io/windows-wsl-setting/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://lahuman.github.io/windows-wsl-setting/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://lahuman.github.io/windows-wsl-setting/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> <ins class="kakao_ad_area" style="display:none;" data-ad-unit = "DAN-ubp67fs9s850" data-ad-width = "320" data-ad-height = "100"></ins> <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://lahuman.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.goup.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="https://lahuman.github.io/assets/js/scripts.js"></script> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74095083-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-74095083-1'); </script> <script type="text/javascript"> var disqus_shortname = 'daniels-blog'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
