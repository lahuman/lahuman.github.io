<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="https://lahuman.github.io/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.8.4">Jekyll</generator><link href="https://lahuman.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://lahuman.github.io/" rel="alternate" type="text/html" /><updated>2021-09-22T10:47:11+09:00</updated><id>https://lahuman.github.io/</id><title type="html">lahuman</title><subtitle>열심히 사는 아저씨</subtitle><entry><title type="html">wsl2의 node 기반에서 프로젝트 sqlite3 실행하기</title><link href="https://lahuman.github.io/sqlite3_node_wsl2/" rel="alternate" type="text/html" title="wsl2의 node 기반에서 프로젝트 sqlite3 실행하기" /><published>2021-09-22T00:00:00+09:00</published><updated>2021-09-22T00:00:00+09:00</updated><id>https://lahuman.github.io/sqlite3_node_wsl2</id><content type="html" xml:base="https://lahuman.github.io/sqlite3_node_wsl2/">&lt;h1 id=&quot;wsl2의-node기반-프로젝트에서-sqlite3를-사용하기-위해서-설치되어야-할-라이브러리와-설정-리빌드가-필요합니다&quot;&gt;wsl2의 node기반 프로젝트에서 sqlite3를 사용하기 위해서 설치되어야 할 라이브러리와 설정, 리빌드가 필요합니다.&lt;/h1&gt;

&lt;p&gt;먼저 sqlite3를 사용하기 위해서는 다음 라이브러리가 설치되어 있어야 합니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;make&lt;/li&gt;
  &lt;li&gt;g++&lt;/li&gt;
  &lt;li&gt;python2 or python3&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;라이브러리-설치-하기&quot;&gt;라이브러리 설치 하기&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo apt install make g++ python3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;node에서-python3를-사용하도록-설정합니다&quot;&gt;node에서 python3를 사용하도록 설정합니다.&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ npm config set python python3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;node-gyp-rebuild&quot;&gt;node-gyp rebuild&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ npm rebuild node-gyp
$ npm install sqlite3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 하면, sqlite3가 오류없이 설치되어서 사용할 수 있습니다.&lt;/p&gt;

&lt;h2 id=&quot;참고자료&quot;&gt;참고자료&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/58073775/error-with-node-pre-gyp-when-installing-sqlite3&quot;&gt;Error with node-pre-gyp when installing sqlite3&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="wsl2" /><category term="sqlite3" /><summary type="html">wsl2는 ubuntu 이미지에 python3가 설치되어 있는 환경입니다.</summary></entry><entry><title type="html">어려운 문제를 만나면 어떻게 하나요?</title><link href="https://lahuman.github.io/20210914/" rel="alternate" type="text/html" title="어려운 문제를 만나면 어떻게 하나요?" /><published>2021-09-14T00:00:00+09:00</published><updated>2021-09-14T00:00:00+09:00</updated><id>https://lahuman.github.io/20210914</id><content type="html" xml:base="https://lahuman.github.io/20210914/">&lt;h1 id=&quot;어려운-문제를-만나면-어떻게-하나요&quot;&gt;어려운 문제를 만나면 어떻게 하나요?&lt;/h1&gt;

&lt;p&gt;어려운 문제를 만나면 엉킨 실타래를 풀 듯이 천천히 작은 부분을 해결하도록 노력합니다.&lt;/p&gt;

&lt;p&gt;조금씩 문제의 윤곽을 확인하며, 어떻게 풀어야 할지 생각하면서 해결할 실마리를 찾습니다.&lt;/p&gt;

&lt;p&gt;포기하지 않고 계속 시도를 해서 문제를 해결합니다.&lt;/p&gt;

&lt;p&gt;이게 제가 어려운 문제를 만났을때 해결하는 방법입니다.&lt;/p&gt;</content><category term="단상" /><summary type="html">실패하고 시도하고를 계속 반복합니다.</summary></entry><entry><title type="html">게으른 날들을 보내고 있다.</title><link href="https://lahuman.github.io/20210905/" rel="alternate" type="text/html" title="게으른 날들을 보내고 있다." /><published>2021-09-05T00:00:00+09:00</published><updated>2021-09-05T00:00:00+09:00</updated><id>https://lahuman.github.io/20210905</id><content type="html" xml:base="https://lahuman.github.io/20210905/">&lt;h1 id=&quot;공부도-안하고-아이들과-함께-게임을-하고-딩굴거리고-있습니다&quot;&gt;공부도 안하고, 아이들과 함께 게임을 하고 딩굴거리고 있습니다.&lt;/h1&gt;

&lt;p&gt;코로나로 인해서 멈춘 일상에서 바쁘게 발버둥 치다가, 잠시 쉬고 있습니다.&lt;/p&gt;

&lt;p&gt;의미 있게 쉬고 싶어서 뭘하고 놀지 고민하는 중입니다.&lt;/p&gt;

&lt;p&gt;아이들과 즐겁게 보내고 싶은데, 아이들은 집에서 딩굴거리기를 좋아하네요.
(아빠를 닮았…)&lt;/p&gt;

&lt;p&gt;이번주 까지는 딩굴 거려보렵니다!&lt;/p&gt;</content><category term="단상" /><summary type="html">쉬는 시간</summary></entry><entry><title type="html">꿈과 책과 힘과 벽</title><link href="https://lahuman.github.io/20210829/" rel="alternate" type="text/html" title="꿈과 책과 힘과 벽" /><published>2021-08-29T00:00:00+09:00</published><updated>2021-08-29T00:00:00+09:00</updated><id>https://lahuman.github.io/20210829</id><content type="html" xml:base="https://lahuman.github.io/20210829/">&lt;h1 id=&quot;요즘-잔나비의-노래에-빠져있습니다&quot;&gt;요즘 잔나비의 노래에 빠져있습니다.&lt;/h1&gt;

&lt;p&gt;아내를 따라 듣기 시작한 가수인데, 가사가 매력적이고 목소리도 너무 좋네요.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;//www.youtube.com/watch?v=SJUWooZnfVQ&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;가사를 곱씹으며 일요일을 마무리 합니다.&lt;/p&gt;

&lt;h2 id=&quot;가사&quot;&gt;가사&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;해가 뜨고 다시 지는 것에
연연하였던 나의 작은방
텅 빈 마음 노랠 불러봤자
누군가에겐 소음일 테니
꼭 다문 입 그 새로 삐져나온
보잘것없는 나의 한숨에
나 들으라고 내쉰 숨이 더냐
아버지 내게 물으시고
제 발 저려 난 답할 수 없었네

우리는 우리는
어째서
어른이 된 걸까
하루하루가
참 무거운 짐이야
더는 못 갈 거야

꿈과 책과 힘과 벽 사이를
눈치 보기에 바쁜 나날들
소년이여 야망을 가져라
무책임한 격언 따위에
저 바다를 호령하는 거야
어처구니없던 나의 어린 꿈
가질 수 없음을 알게 되던 날
두드러기처럼 돋은 심술이
끝내 그 이름 더럽히고 말았네

우리는 우리는
어째서
어른이 된 걸까
하루하루가
참 무거운 짐이야
더는 못 간대두

멈춰 선 남겨진
날 보면
어떤 맘이 들까
하루하루가
참 무서운 밤인 걸
잘도 버티는 넌

하루하루가
참 무서운 밤인 걸

자고 나면 괜찮아질 거야
하루는 더 어른이 될 테니
무덤덤한 그 눈빛을 기억해
어릴 적 본 그들의 눈을
우린 조금씩 닮아야 할 거야

소스: Musixmatch

작사: 김도형 / 유영현 / 최정훈
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="단상" /><summary type="html">잔나비 노래에 빠져있다.</summary></entry><entry><title type="html">Google Cloud 서비스 계정으로 Google API 사용하기</title><link href="https://lahuman.github.io/googleapis/" rel="alternate" type="text/html" title="Google Cloud 서비스 계정으로 Google API 사용하기" /><published>2021-08-19T00:00:00+09:00</published><updated>2021-08-19T00:00:00+09:00</updated><id>https://lahuman.github.io/googleapis</id><content type="html" xml:base="https://lahuman.github.io/googleapis/">&lt;h1 id=&quot;google-cloud-서비스-계정으로-google-api-사용하기&quot;&gt;Google Cloud 서비스 계정으로 Google API 사용하기&lt;/h1&gt;

&lt;p&gt;Google Sheet API를 사용하기 위해서 Google cloud console에서 서비스 계정을 만들어 진행하는 과정을 정리합니다.&lt;/p&gt;

&lt;h2 id=&quot;준비-사항&quot;&gt;준비 사항&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://nodejs.org/en/&quot;&gt;Node.js&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://console.cloud.google.com/&quot;&gt;Google cloud console&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;google-cloud-console-에서-프로젝트--서비스-계정-생성-처리&quot;&gt;&lt;a href=&quot;https://console.cloud.google.com/&quot;&gt;Google cloud console&lt;/a&gt; 에서 프로젝트 &amp;amp; 서비스 계정 생성 처리&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Project&lt;/code&gt; 생성&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;LEFT MENU&lt;/code&gt; » &lt;code class=&quot;highlighter-rouge&quot;&gt;APIs &amp;amp; Services&lt;/code&gt; 선택&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ENABLE APIS AND SERVICES.&lt;/code&gt; 클릭&lt;/li&gt;
  &lt;li&gt;API 항목에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;Google Sheets API&lt;/code&gt; 활성화 처리&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;LEFT MENU&lt;/code&gt; »  &lt;code class=&quot;highlighter-rouge&quot;&gt;APIs &amp;amp; Services&lt;/code&gt; » &lt;code class=&quot;highlighter-rouge&quot;&gt;Credentials&lt;/code&gt; » &lt;code class=&quot;highlighter-rouge&quot;&gt;Manage service accounts&lt;/code&gt; » &lt;code class=&quot;highlighter-rouge&quot;&gt;Create Service Accounts&lt;/code&gt; 선택&lt;/li&gt;
  &lt;li&gt;계정 정보 입력 후 계정 생성 완료(2, 3 단계는 옵션이라 그냥 완료 하면 됩니다.)&lt;/li&gt;
  &lt;li&gt;생성된 계정(email) 정보 클릭 » &lt;code class=&quot;highlighter-rouge&quot;&gt;KEYS&lt;/code&gt; 선택&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ADD KEY&lt;/code&gt; » &lt;code class=&quot;highlighter-rouge&quot;&gt;Create new key&lt;/code&gt; 선택&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;JSON&lt;/code&gt; TYPE 선택 하여 파일 다운로드&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;첨부된 파일의 형태는 아래와 같습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;type&quot;: &quot;service_account&quot;,
  &quot;project_id&quot;: &quot;keen-clarity-323809&quot;,
  &quot;private_key_id&quot;: &quot;cd53576f5c47b2b654605c8a7528cabd87bdee93&quot;,
  &quot;private_key&quot;: &quot;-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQClhKfQF6zmI34T\nuetB4vZullnrXI65fkH1/YusnE/uU1rzmWPNarBqhbxzGeSJf0xedVvSW4cNavkG\nDHu3+inlbbieX9xh++2lNGpYwA5BsXPA3xD1lcaWyc71gk6V6kVtHJMFSocLCYZ/\nDCvGfYEcCiZRsrro1M6AuGy6Nug1qld7utCHJY8OwBp/KLyCmpmhXZE5qim8eul/\nLssM2QizCVxegXS3sH6BCUBZOJVVFXvfNveXc23TWvBQJP85/vaJARjVOJeNJbFQ\nObPOdvEo9RYEfmkrIaaFq/natGP/buBYLdPNnS6+x+6fKRyT5rm1q5LUrpyYKadi\nl40HJFNNAgMBAAECggEAHScTQ5SX8GT59NF/PTiTfQDgT5Ma1FMHnSMOMdXKQkjO\nMS+oI2sSLYDmo0NBPHJ+afiztoZGcDeSKt2SAOJ/9Jfxt3tc3qk3vyxPOtiA6lMt\n9x+S5h5+PtrGp/lOjBsaJVCuGHV6+Zew57mmECzUy7KB80vOnem1gXh6NgYruh/A\ntOATcB7BVk7DEDu7mUAM4BPBWb946WeCUr1L4ZD5VM8YdLAydTCGL39/6TKIDAGl\njDEe+x9IK6DTjm0JHsY9orTDzBLzMCRulOLeAIFzZxpnUnihafk/IQ9+l8SH+rkM\nc/008CMOnUpySLx6wwdCvz+TOhucW1a2RfbGYFUExQKBgQDivirN1jvMzzyQIu8U\nzaNsNPVNIMktLSUNzQEnZsMUGXBUfnAszi3OAHY6NYSEJjYMBFThIvuHqhZCUStV\nNPFTzuHx6mg5Oi4QQC8iW/x9mbeQNBsTiY/nZomgnVS8Kko2SKmINxOf1WkGFcyV\nKk+porKTIkW/m7AEsYLzby07wwKBgQC64BkyQib1sxS1hMVhP3l+A+m7OdbWLDDO\nDRJpxHNZW/Svs1egSF2wNqPZFKJ/LHwAPKxNaBCnfQMjxweDY9VzKBIwXl3boJ7m\nvRulzFsBTwRtYG9QKXYLRhvyZRHFs12XV3KISAy5X+kWG7JeZOj4jeAr0N0Qun6F\n9M+THYMTrwKBgAWTv+HIPzhOcKLq+Q598GMc+lunTst5rMumGz0o3euEpKqvYXr4\np0/F2yKbZmMJvZKWGLBg9+biXCHNdU9nOfhhwlT8+wtNTwy/R2mE8bT1LvqxDWlx\nnMSIVSJKPGdUcvba2rCrCiSIT0kDCEEzBTqa8eGEmkqYPcAfzaTHO0mZAoGADGJD\naTA3ErsuWSUWS26AZ5hsycp4cTL2fQEiwj2Rg09ztJ0G5olFJCNK0lzqs9DH2uAq\nburBh8fiCGHtHojkIUB7jBcE00Qeo53OkjsroLeSzIjCd6Z3uyGHQpXuCpLrVdcm\nsN9NcI9pi9yEAntfcPE99MlfjPc+4TOq+c3P3OMCgYB6YFCFBNpPdYqc8EkQ8OUc\nA2MDWRcCW9oKYvu2zvDLjq9zkznUMcW5PaPql1nIEfNW9LNzn/Bc3nSQ1iHaulGZ\nZjaCKdD6pftkMYC73FWIZXIsvmyC8T7TvRvFppdBHjPcSurOJi6ot74MHKhFudm6\nezS2Wh+8ABQ+ucrWUxpMOw==\n-----END PRIVATE KEY-----\n&quot;,
  &quot;client_email&quot;: &quot;sheetapi@keen-clarity-323809.iam.gserviceaccount.com&quot;,
  &quot;client_id&quot;: &quot;114733049967179666126&quot;,
  &quot;auth_uri&quot;: &quot;https://accounts.google.com/o/oauth2/auth&quot;,
  &quot;token_uri&quot;: &quot;https://oauth2.googleapis.com/token&quot;,
  &quot;auth_provider_x509_cert_url&quot;: &quot;https://www.googleapis.com/oauth2/v1/certs&quot;,
  &quot;client_x509_cert_url&quot;: &quot;https://www.googleapis.com/robot/v1/metadata/x509/sheetapi%40keen-clarity-323809.iam.gserviceaccount.com&quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;동영상으로-따라-하기&quot;&gt;동영상으로 따라 하기&lt;/h3&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;//www.youtube.com/embed/pb4t5tKXe7E&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;읽거나-쓰려는-sheet에-권한-부여-하기&quot;&gt;읽거나 쓰려는 sheet에 권한 부여 하기&lt;/h3&gt;

&lt;p&gt;Google sheet에서 Share 버튼을 누른 이후, 생성한 서비스 계정에 READ/WRITE 권한을 부여 해야됩니다.&lt;/p&gt;

&lt;h2 id=&quot;sheet-글-읽기&quot;&gt;sheet 글 읽기&lt;/h2&gt;

&lt;p&gt;다음 라이브러리를 설치 해야 합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install –save googleapis
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;sheet-읽고-쓰는-예제-코드&quot;&gt;sheet 읽고 쓰는 예제 코드&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import { google, Auth } from 'googleapis';
class SheetApi {
    auth: Auth.GoogleAuth = new google.auth.GoogleAuth({
        keyFile: &quot;credentials.json&quot;, //the key file
        //url to spreadsheets API
        scopes: &quot;https://www.googleapis.com/auth/spreadsheets&quot;,
    });
    
    writeSheet() {
        //Auth client Object
        const authClientObject = await this.auth.getClient();
        //Google sheets instance
        const googleSheetsInstance = google.sheets({ version: &quot;v4&quot;, auth: authClientObject });
        const spreadsheetId = &quot;sheetId&quot;;

        //write data into the google sheets
        await googleSheetsInstance.spreadsheets.values.append({
            auth, //auth object
            spreadsheetId, //spreadsheet id
            range: &quot;Sheet1!A:B&quot;, //sheet name and range of cells
            valueInputOption: &quot;USER_ENTERED&quot;, // The information will be passed according to what the usere passes in as date, number or text
            resource: {
                values: [[&quot;첫번째 A 열 데이터&quot;, &quot;1열 B열&quot;], [&quot;두번째 A 열 데이터&quot;, &quot;2열 B열&quot;]],
            },
        });
    }

    readSheet() {
        //Auth client Object
        const authClientObject = await this.auth.getClient();
        //Google sheets instance
        const googleSheetsInstance = google.sheets({ version: &quot;v4&quot;, auth: authClientObject });
        const spreadsheetId = &quot;sheetId&quot;;

        //Read front the spreadsheet
        const { data: { values } } = await googleSheetsInstance.spreadsheets.values.get({
            auth: this.auth, //auth object
            spreadsheetId, // spreadsheet id
            range: &quot;DATA!A:B&quot;, //range of cells to read from.
        });

        return values;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;참고자료&quot;&gt;참고자료&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.section.io/engineering-education/google-sheets-api-in-nodejs/&quot;&gt;Getting Started with Google Sheets API in Node.js&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="google" /><category term="sheet" /><summary type="html">Google Cloud 서비스 계정 생성 부터 sheet API를 활용한 조회 처리</summary></entry><entry><title type="html">onPaste contentEditable 을 이용한 이미지 붙여 넣기 처리</title><link href="https://lahuman.github.io/onPaste_contentEditable/" rel="alternate" type="text/html" title="onPaste contentEditable 을 이용한 이미지 붙여 넣기 처리" /><published>2021-08-08T00:00:00+09:00</published><updated>2021-08-08T00:00:00+09:00</updated><id>https://lahuman.github.io/onPaste_contentEditable</id><content type="html" xml:base="https://lahuman.github.io/onPaste_contentEditable/">&lt;h1 id=&quot;onpaste-contenteditable-을-이용한-이미지-붙여-넣기-처리&quot;&gt;onPaste contentEditable 을 이용한 이미지 붙여 넣기 처리&lt;/h1&gt;

&lt;p&gt;페이스북 댓글창에서 클립보드에 저장(Ctrl+C) 된 이미지를 붙여넣기(Ctrl+V)를 하면, 이미지가 업로드 되는 것을 확인 할 수 있습니다.&lt;/p&gt;

&lt;p&gt;이를 구현 하기 위해서는 우선 다음 &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/onpaste&quot;&gt;HTMLElement.onpaste&lt;/a&gt; 이벤트에 대하여 알아야합니다.&lt;/p&gt;

&lt;p&gt;간단하게 요약하면 &lt;code class=&quot;highlighter-rouge&quot;&gt;붙여넣기를 처리&lt;/code&gt;할때 호출되는 이벤트 인데요. 붙여넣는 이벤트에서 이미지일 경우 업로드 처리를 하면 됩니다.&lt;/p&gt;

&lt;h2 id=&quot;구현하기&quot;&gt;구현하기&lt;/h2&gt;

&lt;p&gt;구현은 React.js기반으로 구현 하였습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import React from &quot;react&quot;;
import axios from &quot;axios&quot;;
import MockAdapter from &quot;axios-mock-adapter&quot;;
import &quot;./styles.css&quot;;

// 서버 없이 테스트를 위해서 axios-mock-adapter 사용
const mock = new MockAdapter(axios);
mock.onPost(&quot;/fileupload&quot;).reply(200, {
  seq: 1
});

// 원래 소스는 `&amp;lt;img src=&quot;/download/${seq}&quot; width=&quot;100%&quot;/&amp;gt;`;
const buildImageHtml = (seq) =&amp;gt;
  `&amp;lt;img src=&quot;https://lahuman.github.io/assets/img/logo.png&quot; width=&quot;100%&quot;/&amp;gt;`;

export default function App() {
  const comment = React.useRef();

  const fileUpload = async (blob) =&amp;gt; {
    const formData = new FormData();
    formData.append(&quot;file&quot;, blob);
    const { data: fileInfo } = await axios.post(`/fileupload`, formData);
    return fileInfo;
  };

  const focusMoveWithFile = () =&amp;gt; {
    comment.current.focus();
    if (
      typeof window.getSelection !== &quot;undefined&quot; &amp;amp;&amp;amp;
      typeof document.createRange !== &quot;undefined&quot;
    ) {
      const range = document.createRange();
      range.selectNodeContents(comment.current);
      range.collapse(false);
      const sel = window.getSelection();
      if (!sel) return;
      sel.removeAllRanges();
      sel.addRange(range);
    }
  };

  return (
    &amp;lt;div
      ref={comment}
      contentEditable=&quot;true&quot;
      className=&quot;comment&quot;
      suppressContentEditableWarning
      onPaste={async (event) =&amp;gt; {
        // event.preventDefault(); 이 없을 경우 upload와 상관 없이 이미지가 붙음
        event.preventDefault();
        const item = event.clipboardData.items[0];
        if (item.type.indexOf(&quot;image&quot;) === 0) {
          const blob = item.getAsFile();
          const { seq } = await fileUpload(blob);
          const text = `${comment.current.innerHTML}${buildImageHtml(seq)}`;
          comment.current.innerHTML = text;
          focusMoveWithFile();
        } else {
          // 이미지가 아닐 경우 text로 처리 
          const paste = event.clipboardData.getData(&quot;text&quot;);
          if (paste) {
            const selection = window.getSelection();
            if (!selection) return;
            if (selection &amp;amp;&amp;amp; !selection.rangeCount) return;
            selection?.deleteFromDocument();
            selection?.getRangeAt(0).insertNode(document.createTextNode(paste));
          }
        }
      }}
      placeholder=&quot;글을 작성해주세요 (글 작성 꿀팁 : 여기에 이미지를 Ctrl+C, Ctrl+V로 바로 붙여넣기 할 수 있어요!)&quot;
    /&amp;gt;
  );
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;예제-바로가기&quot;&gt;&lt;a href=&quot;https://codesandbox.io/s/comment-with-image-upload-tewvt?file=/src/App.js:0-2089&quot;&gt;예제 바로가기&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;기능은 생각보다 어렵지 않았고 재미있었다.&lt;/p&gt;

&lt;h2 id=&quot;참고자료&quot;&gt;참고자료&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/onpaste&quot;&gt;HTMLElement.onpaste&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="onpaste" /><category term="contentEditable" /><summary type="html">클립보드의 이미지를 업로드 후 화면 표기 처리</summary></entry><entry><title type="html">WSL의 서버를 host(window)에서 접근 하는 방법</title><link href="https://lahuman.github.io/wls_port_forwarding/" rel="alternate" type="text/html" title="WSL의 서버를 host(window)에서 접근 하는 방법" /><published>2021-07-28T00:00:00+09:00</published><updated>2021-07-28T00:00:00+09:00</updated><id>https://lahuman.github.io/wls_port_forwarding</id><content type="html" xml:base="https://lahuman.github.io/wls_port_forwarding/">&lt;h1 id=&quot;wsl-내에서-웹서버를-띄어서-확인이-안되는-경우-다음과-같이-처리-하여-주세요&quot;&gt;WSL 내에서 웹서버를 띄어서 확인이 안되는 경우 다음과 같이 처리 하여 주세요.&lt;/h1&gt;

&lt;p&gt;port foward를 위해서는 &lt;a href=&quot;https://docs.microsoft.com/en-us/windows-server/networking/technologies/netsh/netsh&quot;&gt;Netsh&lt;/a&gt;를 이용할 예정입니다.&lt;/p&gt;

&lt;h2 id=&quot;1-net-tools를-wsl-안에-설치-하기&quot;&gt;1. net-tools를 WSL 안에 설치 하기&lt;/h2&gt;

&lt;p&gt;ubuntu 기준으로 다음의 명령어를 이용해서 설치 합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt install net-tools
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;powser-shell-실행-파일-생성하기&quot;&gt;powser shell 실행 파일 생성하기&lt;/h2&gt;

&lt;p&gt;Netsh 설정이된 ps1 의 확장자를 가진 파일을 생성합니다.&lt;/p&gt;

&lt;p&gt;다음을 &lt;code class=&quot;highlighter-rouge&quot;&gt;network.ps1&lt;/code&gt; 이라는 파일을 생성합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;If (-NOT ([Security.Principal.WindowsPrincipal][Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] &quot;Administrator&quot;)) {   
  $arguments = &quot;&amp;amp; '&quot; + $myinvocation.mycommand.definition + &quot;'&quot;
  Start-Process powershell -Verb runAs -ArgumentList $arguments
  Break
}

$remoteport = bash.exe -c &quot;ifconfig eth0 | grep 'inet '&quot;
$found = $remoteport -match '\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}';

if ($found) {
  $remoteport = $matches[0];
}
else {
  Write-Output &quot;IP address could not be found&quot;;
  exit;
}

$ports = @(3000, 5500, 8080);

Invoke-Expression &quot;netsh interface portproxy reset&quot;;

for ($i = 0; $i -lt $ports.length; $i++) {
  $port = $ports[$i];
  Invoke-Expression &quot;netsh interface portproxy add v4tov4 listenport=$port connectport=$port connectaddress=$remoteport&quot;;
  Invoke-Expression &quot;netsh advfirewall firewall add rule name=$port dir=in action=allow protocol=TCP localport=$port&quot;;
}

Invoke-Expression &quot;netsh interface portproxy show v4tov4&quot;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;여기서 중요한 것은 &lt;code class=&quot;highlighter-rouge&quot;&gt;$ports = @(3000, 5500, 8080);&lt;/code&gt; 부분입니다.&lt;/p&gt;

&lt;p&gt;forward 할 port를 작성합니다.&lt;/p&gt;

&lt;h2 id=&quot;3-실행하기&quot;&gt;3. 실행하기&lt;/h2&gt;

&lt;p&gt;powser shell에서 실행을 하면 다음과 같은 오류 메시지를 받을 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; $&amp;gt; .\network.ps1
.\network.ps1 : 이 시스템에서 스크립트를 실행할 수 없으므로 C:\DEV\network.ps1 파일을 로드할 수 없습니다. 자세한
내용은 about_Execution_Policies(https://go.microsoft.com/fwlink/?LinkID=135170)를 참조하십시오.
위치 줄:1 문자:1
+ .\network.ps1
+ ~~~~~~~~~~~~~
    + CategoryInfo          : 보안 오류: (:) [], PSSecurityException
    + FullyQualifiedErrorId : UnauthorizedAccess
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;해결을 위해서 powser shell을 &lt;code class=&quot;highlighter-rouge&quot;&gt;관리자&lt;/code&gt; 모드로 실행하고, &lt;code class=&quot;highlighter-rouge&quot;&gt;Set-ExecutionPolicy -ExecutionPolicy RemoteSigned&lt;/code&gt; 명령어로 실행 규칙을 변경합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$&amp;gt; Set-ExecutionPolicy -ExecutionPolicy RemoteSigned

실행 규칙 변경
실행 정책은 신뢰하지 않는 스크립트로부터 사용자를 보호합니다. 실행 정책을 변경하면 about_Execution_Policies 도움말
항목(https://go.microsoft.com/fwlink/?LinkID=135170)에 설명된 보안 위험에 노출될 수 있습니다. 실행 정책을
변경하시겠습니까?
[Y] 예(Y)  [A] 모두 예(A)  [N] 아니요(N)  [L] 모두 아니요(L)  [S] 일시 중단(S)  [?] 도움말 (기본값은 &quot;N&quot;): Y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이후 다시 실행하면 다음과 같이 정상 동작을 확인 할 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$&amp;gt; .\network.ps1


확인됨


확인됨


확인됨


ipv4 수신 대기:             ipv4에 연결:

주소            포트        주소            포트
--------------- ----------  --------------- ----------
*               5500        192.168.254.148 5500
*               3000        192.168.254.148 3000
*               8080        192.168.254.148 8080

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;4-테스트&quot;&gt;4. 테스트&lt;/h2&gt;

&lt;p&gt;WSL에서 5500 포트로 웹을 띄우과 브라우져에서 접속하여 확인하면 잘 동작 하는 것을 확인 할 수 있습니다.&lt;/p&gt;

&lt;h2 id=&quot;참고-자료&quot;&gt;참고 자료&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://dev.to/vishnumohanrk/wsl-port-forwarding-2e22&quot;&gt;WSL Port Forwarding&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://oyeahhh.tistory.com/170&quot;&gt;[PowerShell] Error: 이 시스템에서 스크립트를 실행할 수 없으므로 …&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="wsl" /><category term="port" /><category term="forwrding" /><summary type="html">WSL2를 사용하면서 host에서 특정 port 연결</summary></entry><entry><title type="html">면접관으로 몇 일간 면접을 보았다.</title><link href="https://lahuman.github.io/20210728/" rel="alternate" type="text/html" title="면접관으로 몇 일간 면접을 보았다." /><published>2021-07-28T00:00:00+09:00</published><updated>2021-07-28T00:00:00+09:00</updated><id>https://lahuman.github.io/20210728</id><content type="html" xml:base="https://lahuman.github.io/20210728/">&lt;h1 id=&quot;회사에-사람을-뽑기-위해서-인력을-찾고-면접을-보았습니다&quot;&gt;회사에 사람을 뽑기 위해서 인력을 찾고 면접을 보았습니다.&lt;/h1&gt;

&lt;p&gt;면접관으로 자리에 앉아있었지만, 면접보는 사람을 배려하는 시간을 가졌습니다.&lt;/p&gt;

&lt;p&gt;꼭 알맞은 사람을 찾지 못했지만, 많은 생각을 한 시간이었습니다.&lt;/p&gt;

&lt;p&gt;또 부족한 나를 다시 한번 생각하게된 시간이었습니다.&lt;/p&gt;

&lt;h2 id=&quot;나를-되돌아보는-시간이었습니다&quot;&gt;나를 되돌아보는 시간이었습니다.&lt;/h2&gt;</content><category term="단상" /><summary type="html">면접을 보는 사람을 배려하도록 노력하였다.</summary></entry><entry><title type="html">중복 객체 제거 하기</title><link href="https://lahuman.github.io/unique_object_array/" rel="alternate" type="text/html" title="중복 객체 제거 하기" /><published>2021-07-18T00:00:00+09:00</published><updated>2021-07-18T00:00:00+09:00</updated><id>https://lahuman.github.io/unique_object_array</id><content type="html" xml:base="https://lahuman.github.io/unique_object_array/">&lt;h1 id=&quot;중복-제거-하기&quot;&gt;중복 제거 하기&lt;/h1&gt;

&lt;p&gt;단순한 숫자나 문자의 중복 제거는 Set을 이용하면 간단하게 처리 할 수 있습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const list = ['1', '2', '3', '2', 1,2,3, 1,2,3];
// Set 을 이용한 방식
[...new Set(list)]
// filter를 이용한 방식
list.filter((item, index) =&amp;gt; list.indexOf(item) === index);
// 결과
[ '1', '2', '3', 1, 2, 3 ]

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;하지만, 객체의 중복제거의 경우는 조금 다른 방식으로 처리 해야 합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 중복 제거가 안됨
const list = [{a:1, b:2}, {a:2, b:1}, {a:1, b:2}];

list.filter((item, index) =&amp;gt; list.indexOf(item) === index);

// 결과 
[ { a: 1, b: 2 }, { a: 2, b: 1 }, { a: 1, b: 2 } ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;바로, JSON.stringify를 이용하는 방식입니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const list = [{a:1, b:2}, {a:2, b:1}, {a:1, b:2}];

const uniqueList = [...new Set(list.map(JSON.stringify))].map(JSON.parse);
// 결과 
[ { a: 1, b: 2 }, { a: 2, b: 1 } ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;다른 방식으로 key 값을 기준으로 unique 객체를 추출한다면 다음과 같은 방식으로도 가능합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// a의 값이 key 인경우
const list = [{a:1, b:2}, {a:2, b:1}, {a:1, b:2}];

list.filter((item, index) =&amp;gt; {
    const key = item.a;
    return index === list.findIndex((e)=&amp;gt; e.a === key);
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위의 방식이 일반적으로 많이 쓰이는 방식 입니다.&lt;/p&gt;

&lt;h2 id=&quot;참고-자료&quot;&gt;참고 자료&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://dongmin-jang.medium.com/javascript-array-%EC%A4%91%EB%B3%B5-%EC%A0%9C%EA%B1%B0%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-es6-b5b9075361f9&quot;&gt;[Javascript] array 중복 제거하는 방법(ES6)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://javascript.plainenglish.io/the-easy-way-to-create-a-unique-array-of-json-objects-in-javascript-5634254b17aa&quot;&gt;The easy way to create a unique array of JSON Objects in JavaScript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="javascript" /><category term="unique" /><summary type="html">javascript array에서 중복되는 객체 제거하기</summary></entry><entry><title type="html">기술 부채 또는 발전에 대한 단상</title><link href="https://lahuman.github.io/20210716/" rel="alternate" type="text/html" title="기술 부채 또는 발전에 대한 단상" /><published>2021-07-16T00:00:00+09:00</published><updated>2021-07-16T00:00:00+09:00</updated><id>https://lahuman.github.io/20210716</id><content type="html" xml:base="https://lahuman.github.io/20210716/">&lt;h1 id=&quot;기술-부채-또는-발전에-대한-단상&quot;&gt;기술 부채 또는 발전에 대한 단상&lt;/h1&gt;

&lt;p&gt;기술 부채는 어디서올까?&lt;/p&gt;

&lt;p&gt;내 경우는 대부분 미래의 나에게 부담을 주어서 발생한다.&lt;/p&gt;

&lt;p&gt;그리고.. 오늘의(미래의)나는 과거의 나를 욕하면서 뜯어 고치거나, 무시해버린다.&lt;/p&gt;

&lt;p&gt;또 다른 경우는 동료가 나에게 서프라이즈 선물로 준다.&lt;/p&gt;

&lt;p&gt;이 또한 욕을 하면서 뜯어 고치거나, 무시해버린다.&lt;/p&gt;

&lt;p&gt;다만, 내가 발전하는 경우는 뜯고 고치는 작업에서 발생한다.&lt;/p&gt;

&lt;p&gt;나를 돌아보고, 동료와 소통하면서 발전하게 된다.&lt;/p&gt;

&lt;h2 id=&quot;오늘도-부채를-탕감해보자&quot;&gt;오늘도 부채를 탕감해보자!&lt;/h2&gt;</content><category term="단상" /><summary type="html">최신 기술에 대하여 사용법만 인지하고 이해를 못하는 경우 발생하는 문제</summary></entry></feed>
