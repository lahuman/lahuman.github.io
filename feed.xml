<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="https://lahuman.github.io/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.8.4">Jekyll</generator><link href="https://lahuman.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://lahuman.github.io/" rel="alternate" type="text/html" /><updated>2020-07-11T22:56:48+09:00</updated><id>https://lahuman.github.io/</id><title type="html">lahuman</title><subtitle>열심히 사는 아저씨</subtitle><entry><title type="html">엄청 심하게 체해서 한동안 두통과 소화 불량에 시달렸습니다.</title><link href="https://lahuman.github.io/20200707/" rel="alternate" type="text/html" title="엄청 심하게 체해서 한동안 두통과 소화 불량에 시달렸습니다." /><published>2020-07-07T00:00:00+09:00</published><updated>2020-07-07T00:00:00+09:00</updated><id>https://lahuman.github.io/20200707</id><content type="html" xml:base="https://lahuman.github.io/20200707/">&lt;h1 id=&quot;점심때-먹은-돼지비계를-씹는-순간-느낌이-싸했습니다&quot;&gt;점심때 먹은 돼지비계를 씹는 순간 느낌이 싸했습니다.&lt;/h1&gt;

&lt;p&gt;이거 먹으면 속이 안 좋을 느낌이 강하게 왔습니다.&lt;/p&gt;

&lt;p&gt;하지만 이미 반이상을 뜯어서 입에 넣고 씹는 중이라 뱉어내기 보다 그냥 삼켰습니다.&lt;/p&gt;

&lt;p&gt;이게 원인이 아닐까 생각합니다. 3시를 넘는 시점부터 머리가 아프고 눈앞이 빙글빙글 돌았습니다.&lt;/p&gt;

&lt;p&gt;6시 퇴근 시간이 되지 마자 집으로 달려갔습니다. 가는 동안도 너무 힘들었습니다.&lt;/p&gt;

&lt;p&gt;집에 도착해서 아내에게 몸이 안 좋다고 이야기하고 바로 침대에 누웠습니다.&lt;/p&gt;

&lt;p&gt;오한과 두통, 몸살까지 와서 저를 괴롭혔습니다.&lt;/p&gt;

&lt;p&gt;지옥 같던 밤이 지나고 아침이 되었지만, 속이 여전히 좋지 않았습니다.&lt;/p&gt;

&lt;p&gt;병원에 가서 진료를 받고 약을 받아서 회사에서 근무를 시작했지만, 컨디션이 정상이 아니라서 많이 힘들었습니다.&lt;/p&gt;

&lt;p&gt;금요일이 되어서야 두통과 속이 괜찮아졌습니다.&lt;/p&gt;

&lt;p&gt;아픈 동안 동료들이 걱정도 해주고, 약도 나눠 주고 감사함을 많이 느낀 시간이었습니다.&lt;/p&gt;

&lt;h3 id=&quot;하지만-체기가-일주일을-간-건-처음이라서-늙음-때문인가-하는-자괴감이-드는-시간이었습니다&quot;&gt;하지만, 체기가 일주일을 간 건 처음이라서 늙음 때문인가 하는 자괴감이 드는 시간이었습니다.&lt;/h3&gt;</content><category term="단상" /><category term="급체" /><summary type="html">지난 일주일이 어떻게 지나갔는지 모를 정도로 아팠어요....</summary></entry><entry><title type="html">내가 하는 일이 누구에게 가치를 주는 것 일까?</title><link href="https://lahuman.github.io/20200705/" rel="alternate" type="text/html" title="내가 하는 일이 누구에게 가치를 주는 것 일까?" /><published>2020-07-05T00:00:00+09:00</published><updated>2020-07-05T00:00:00+09:00</updated><id>https://lahuman.github.io/20200705</id><content type="html" xml:base="https://lahuman.github.io/20200705/">&lt;h1 id=&quot;내가-하는-일이-누구에게-가치를-주는-것-일까&quot;&gt;내가 하는 일이 누구에게 가치를 주는 것 일까?&lt;/h1&gt;

&lt;p&gt;가치에 대하여 많은 고민을 하고 있습니다.&lt;/p&gt;

&lt;p&gt;과연 “내가 하는 일이 누구에게 가치를 주는 것 일까?”라는 생각에 답이 명확하게 나오지 않았습니다.&lt;/p&gt;

&lt;p&gt;저는 개발자로 사내의 IT 관련 불편한 부분을 개선하거나 새로운 기능 개발을 주로 하고 있습니다.&lt;/p&gt;

&lt;p&gt;대부분이 내부 시스템이라서 대외용은 아닙니다. 고객군은 명확하게 GSSHOP 직원들로 이루어져 있습니다.&lt;/p&gt;

&lt;p&gt;GSSHOP의 심의팀, 품질팀, 브랜드 사업부, 편성전략팀, 보안팀 등 여러 팀과 협업을 하면서 그분들에게 얼마의 가치를 주고 있는지 사실 잘 모르겠습니다.&lt;/p&gt;

&lt;p&gt;어떤 프로젝트는 완료되고 아무도 관심을 가지지 않아서 종료되고, 어떤 프로젝트는 지속적으로 관심을 가지고 발전을 되고 있습니다.&lt;/p&gt;

&lt;p&gt;진행한 대부분의 프로젝트 개발 공수는 크게 다르지 않았습니다.&lt;/p&gt;

&lt;p&gt;다만, 사용자에게 얼마나 가치가 있는지는 프로젝트의 시작 단계에 어떤 활동을 했는지가 크게 작용하였던 걸로 기억합니다.&lt;/p&gt;

&lt;p&gt;작년에 디자인 씽킹과 UT(User Test), Prototype 등을 진행하면서 목적과 가치를 검증을 했던 프로젝트는 지금까지 살아남아 있고, 목적 없이 높은 분의 지시로 진행했던 프로젝트는 종료되었습니다.&lt;/p&gt;

&lt;h2 id=&quot;내가-하는-일이-누군가에게-가치가-되는-것은-그-누군가가-자발적으로-함께-참여하고-발전시켜야만-실현된다고-생각합니다&quot;&gt;내가 하는 일이 누군가에게 가치가 되는 것은 그 누군가가 자발적으로 함께 참여하고 발전시켜야만 실현된다고 생각합니다.&lt;/h2&gt;</content><category term="단상" /><category term="가치" /><summary type="html">결과가 가치를 만들기 보다 과정에서 가치를 찾는 일을 하고 싶습니다.</summary></entry><entry><title type="html">반복되는 일상에서의 자동화 도입기</title><link href="https://lahuman.github.io/20200703/" rel="alternate" type="text/html" title="반복되는 일상에서의 자동화 도입기" /><published>2020-07-03T00:00:00+09:00</published><updated>2020-07-03T00:00:00+09:00</updated><id>https://lahuman.github.io/20200703</id><content type="html" xml:base="https://lahuman.github.io/20200703/">&lt;h1 id=&quot;반복되는-일상에서의-자동화-도입기&quot;&gt;반복되는 일상에서의 자동화 도입기&lt;/h1&gt;

&lt;p&gt;7년 전 SI(System Integrator)를 끝내고, 유지보수 업무를 진행했을 때의 일입니다.&lt;/p&gt;

&lt;p&gt;유지보수 진행이 3개월쯤 지나자 하루의 80%를 반복되는 업무로 소비하게 되었습니다.&lt;/p&gt;

&lt;p&gt;반복되는 일들은 아래와 같았습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;약 30대의 서버의 점검을 진행하고 특이사항을 보고하는 &lt;strong&gt;일일 점검&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;소프트웨어의 특이사항을 확인하고 물리 서버를 육안으로 점검하는 &lt;strong&gt;월별 점검&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;외부 (Oracle, Tmax, 등…) 소프트웨어 담당자들이 내부에 방문해서 점검을 하고 이슈사항 공유와 해결 방안을 제안하는 &lt;strong&gt;분기별 점검&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;매일매일 서버를 점검하고 보고서를 작성해 고객에게 보고를 하고 나면 하루의 반이 지나갔습니다.&lt;/p&gt;

&lt;p&gt;반복되는 일상이 계속되자 함께 유지보수를 하는 동료들도 쉽게 지쳤고 업무에 대한 집중과 관심도 역시 떨어졌습니다.&lt;/p&gt;

&lt;p&gt;고객의 추가 개발 요청은 물론이고 수정조차도 진행을 할 수 없는 하루하루가 계속되었습니다.&lt;/p&gt;

&lt;p&gt;결국 4개월쯤 지났을때, 한 명의 동료가 떠났고 남은 동료들은 떠난 동료의 업무를 분담했지만, 인수인계가 잘 이루어지지 않아서 고생을 할 수밖에 없었습니다.&lt;/p&gt;

&lt;p&gt;결국 남은 동료들과 이런 문제를 해결하기 위한 논의를 했고, 그때 나온 방안이 반복 업무에 대한 자동화였습니다.&lt;/p&gt;

&lt;p&gt;논의 결과 자동화로 할 수 있는 일들은 다음과 같았습니다.&lt;/p&gt;

&lt;p&gt;일일 서버 점검 프로그램&lt;/p&gt;

&lt;p&gt;보고서 작성 관리 시스템&lt;/p&gt;

&lt;p&gt;일일 서버 점검 프로그램은 서버 담당자가 매일 30개의 서버에서 이벤트를 체크하고 문서를 작성하는 일을 정리해 주었고, 저는 프로그램으로 자동화 처리를 지원하였습니다.&lt;/p&gt;

&lt;p&gt;자동화가 이루어지자 오전 업무량의 50%가 줄었습니다.&lt;/p&gt;

&lt;p&gt;당시 고객사에는 따로 보고서 양식이 있어서 요청사항을 매번 문서로 작성하는데 많은 시간을 소비하였습니다. 하지만 미리 만든 템플릿에 내용을 작성하면 자동으로 문서를 만들어주는 시스템을 적용 후 요청사항에 대한 관리와 문서에 대한 부담감을 줄일 수 있게 되었고 그 외 업무에 더욱 집중할 수 있었습니다.&lt;/p&gt;

&lt;p&gt;이 일은 저 혼자의 능력만으로는 이루기 어려운 일이었습니다. 동료들의 지지와 협력이 있기에 가능했습니다.&lt;/p&gt;

&lt;p&gt;만약 이 일을 시작할 때 누군가 부정적인 반응을 보였거나, 함께 하려고 하지 않았다면 진행하지 못하였을 것입니다.&lt;/p&gt;

&lt;p&gt;결국 변화는 혼자 일어낼 수 없고 &lt;strong&gt;“동료”&lt;/strong&gt;와 함께 해야 한다고 생각합니다.&lt;/p&gt;

&lt;p&gt;그래서 이 글을 보시는 분들께 여쭤보고 싶습니다.&lt;/p&gt;

&lt;h2 id=&quot;지금-동료들과-즐겁게-일하고-계신가요&quot;&gt;지금 동료들과 즐겁게 일하고 계신가요?&lt;/h2&gt;</content><category term="단상" /><category term="자동화" /><summary type="html">지나간 과거의 일을 회상하면서...</summary></entry><entry><title type="html">Node] Sequelize에서 MSSQL 연동시 RFC 6066  오류 해결 방법</title><link href="https://lahuman.github.io/node_mssql_sequelize/" rel="alternate" type="text/html" title="Node] Sequelize에서 MSSQL 연동시 RFC 6066  오류 해결 방법" /><published>2020-06-26T00:00:00+09:00</published><updated>2020-06-26T00:00:00+09:00</updated><id>https://lahuman.github.io/node_mssql_sequelize</id><content type="html" xml:base="https://lahuman.github.io/node_mssql_sequelize/">&lt;h1 id=&quot;node-sequelize에서-mssql-연동시-rfc-6066-오류-해결-방법&quot;&gt;Node] Sequelize에서 MSSQL 연동시 RFC 6066 오류 해결 방법&lt;/h1&gt;

&lt;p&gt;Sequlize 에서 MSSQL을 연동할때 드라이버로 &lt;strong&gt;tedious@^6.0.0&lt;/strong&gt; 이상을 사용하라고 가이드 합니다.&lt;/p&gt;

&lt;p&gt;설치해서 DBMS에 접근했을때, 다음과 같은 오류가 발생하면,&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(node:95610) [DEP0123] DeprecationWarning: Setting the TLS ServerName to an IP address is not permitted by RFC 6066. This will be ignored in a future version.
(Use node --trace-deprecation ... to show where the warning was created)
(node:95610) UnhandledPromiseRejectionWarning: SequelizeConnectionError: Failed to connect to IPADDRESS:1433 - 4438633920:error:1425F102:SSL routines:ssl_choose_client_version:unsupported protocol:../deps/openssl/openssl/ssl/statem/statem_lib.c:1942:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;db연결 옵션에 encrypt: false을 추가 하면 됩니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;use static&quot;;

const Sequelize = require(&quot;sequelize&quot;);

const mssqlDB = new Sequelize(
  process.env.HOMENET_MSSQL_DB,
  process.env.HOMENET_MSSQL_USER,
  process.env.HOMENET_MSSQL_PASS,
  {
    host: process.env.HOMENET_MSSQL_URL,
    port: process.env.HOMENET_MSSQL_PORT || &quot;1433&quot;,
    dialect: &quot;mssql&quot;,
    dialectOptions: {
      options: {
        useUTC: false,
        dateFirst: 1,
        encrypt: false, // 오류 발생시 추가 한 부분!
      },
    },
    pool: {
      max: 5,
      min: 0,
      acquire: 30000,
      idle: 10000,
    },
    define: {
      // The `timestamps` field specify whether or not the `createdAt` and `updatedAt` fields will be created.
      // This was true by default, but now is false by default
      timestamps: false,
      supportBigNumbers: true,
    },
  }
);

module.exports = {
    mssqlDB
};

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 하면 문제없이 조회가 됩니다!!&lt;/p&gt;

&lt;h2 id=&quot;참고자료&quot;&gt;참고자료&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://sequelize.org/v5/manual/dialects.html&quot;&gt;Dialects&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/tediousjs/node-mssql/issues/884&quot;&gt;DeprecationWarning: Setting the TLS ServerName to an IP address is not permitted by RFC 6066. #884&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="express" /><category term="tedious" /><category term="sequelize" /><summary type="html">mssql 드라이버로 mssql이 아니라 tedious 라이브러리를 쓰라고 하네요!</summary></entry><entry><title type="html">MSA 관련 토론회를 했다.</title><link href="https://lahuman.github.io/20200624/" rel="alternate" type="text/html" title="MSA 관련 토론회를 했다." /><published>2020-06-24T00:00:00+09:00</published><updated>2020-06-24T00:00:00+09:00</updated><id>https://lahuman.github.io/20200624</id><content type="html" xml:base="https://lahuman.github.io/20200624/">&lt;h1 id=&quot;msa-토론회&quot;&gt;MSA 토론회&lt;/h1&gt;

&lt;p&gt;이번 토론회에서는 외부 초청으로 오신 분이 계셨습니다.&lt;/p&gt;

&lt;p&gt;나이가 지긋하신 분이 오셨는데, 개발이야기를 함께 하기에 연세도 상당히 많이 보이셨습니다.&lt;/p&gt;

&lt;p&gt;소개를 해주셨는데, NEXTREE 대표님이라고 해서 살짝 놀랐습니다.&lt;/p&gt;

&lt;p&gt;개발 이야기를 하는 회사의 대표님는 처음 뵈었습니다.&lt;/p&gt;

&lt;p&gt;우선 이야기 해주신 몇가지 이야기중 기억에 남는 것은 아래와 같습니다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;이벤트 기반으로 개발 해야 한다.&lt;/li&gt;
  &lt;li&gt;데이터(값)가 아닌 도메인 기준으로 설계 해야 한다.&lt;/li&gt;
  &lt;li&gt;빅뱅 보단 점진적으로 MSA로 변환하는 것을 추천 한다.&lt;/li&gt;
  &lt;li&gt;단일 트랜젝션을 사용하지 않으면 성능이 개선된다.&lt;/li&gt;
  &lt;li&gt;MSA는 FRONTEND와 BACKEND가 쌍으로 구성된다.&lt;/li&gt;
  &lt;li&gt;동일한 레벨의 API 호출은 안된다.(FRONTEND를 통해서 호출 하거나, 아래 레벨의 API만 호출 할수 있다.)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;그 외에도 많은 이야기를 해주셨는데, 유익한 시간이었습니다.&lt;/p&gt;

&lt;h2 id=&quot;즐거운-시간이었습니다&quot;&gt;즐거운 시간이었습니다.&lt;/h2&gt;</content><category term="단상" /><category term="MSA" /><summary type="html">NEXTREE 대표님이 오셔서 토론회를 함께 했습니다.</summary></entry><entry><title type="html">Node] epxress 서버에서 NODE_ENV를 production으로 설정시 앱 성능 3배 향상 됩니다.</title><link href="https://lahuman.github.io/node_env-production/" rel="alternate" type="text/html" title="Node] epxress 서버에서 NODE_ENV를 production으로 설정시 앱 성능 3배 향상 됩니다." /><published>2020-06-15T00:00:00+09:00</published><updated>2020-06-15T00:00:00+09:00</updated><id>https://lahuman.github.io/node_env-production</id><content type="html" xml:base="https://lahuman.github.io/node_env-production/">&lt;h1 id=&quot;node-epxress-서버에서-node_env를-production으로-설정시-앱-성능-3배-향상-됩니다&quot;&gt;Node] epxress 서버에서 NODE_ENV를 production으로 설정시 앱 성능 3배 향상 됩니다.&lt;/h1&gt;

&lt;p&gt;함께 있는 동료에서 &lt;strong&gt;NODE_ENV&lt;/strong&gt;를 &lt;strong&gt;production&lt;/strong&gt;으로만 변경해서 성능 향상이 된다는 이야기를 처음 들었을때는 약간의 의구심이 생겼었습니다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;LOG_LEVEL&lt;/strong&gt;도 아니고 NODE_ENV를 변경해서 어떻게 달라지는거지?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;그런데 &lt;strong&gt;Express 서버&lt;/strong&gt;의 경우에는 NODE_ENV가 production인 경우 다음과 같이 동작한다고 합니다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;보기 템플리트를 캐싱.&lt;/li&gt;
  &lt;li&gt;CSS 확장기능을 통해 생성된 CSS 파일을 캐싱.&lt;/li&gt;
  &lt;li&gt;더 간결한 오류 메시지를 생성.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위의 내용은 &lt;a href=&quot;https://expressjs.com/ko/advanced/best-practice-performance.html#set-node_env-to-production&quot;&gt;NODE_ENV를 “production”으로 설정&lt;/a&gt;에서 한글로도 나와 있습니다.&lt;/p&gt;

&lt;p&gt;Express 서버를 사용할경우 꼭 NODE_ENV를 production으로 설정해야겠습니다!&lt;/p&gt;

&lt;h2 id=&quot;참고자료&quot;&gt;참고자료&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://expressjs.com/ko/advanced/best-practice-performance.html#set-node_env-to-production&quot;&gt;NODE_ENV를 “production”으로 설정&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.dynatrace.com/news/blog/the-drastic-effects-of-omitting-node-env-in-your-express-js-applications/&quot;&gt;The drastic effects of omitting NODE_ENV in your Express.js applications&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="express" /><category term="node" /><summary type="html">express 서버의 성능향상 설정</summary></entry><entry><title type="html">번아웃이 온거 같다…</title><link href="https://lahuman.github.io/20200609/" rel="alternate" type="text/html" title="번아웃이 온거 같다..." /><published>2020-06-08T00:00:00+09:00</published><updated>2020-06-08T00:00:00+09:00</updated><id>https://lahuman.github.io/20200609</id><content type="html" xml:base="https://lahuman.github.io/20200609/">&lt;h1 id=&quot;입사한지-1년동안-정말-열심히-개발해왔다&quot;&gt;입사한지 1년동안 정말 열심히 개발해왔다&lt;/h1&gt;

&lt;p&gt;1년간 많은 애자일 방식으로 많은 프로토타입을 만들었다.&lt;/p&gt;

&lt;p&gt;프로토타입은 실패한 것도 있고 성공한 것도 있다.&lt;/p&gt;

&lt;p&gt;10개의 프로젝트 중 3개만 남고 7개는 사용성이 떨어지거나, 필요성이 없어서 중지 되었다.&lt;/p&gt;

&lt;p&gt;이제 회사에서 다시 프로토타입성 프로젝트를 시작한다고 하는데…&lt;/p&gt;

&lt;p&gt;힘들다는 생각부터 든다.&lt;/p&gt;

&lt;p&gt;계속하는 것이 쉽지 않은 일이지만, 내적인 요소보다 외적인 요소로 지친다는 생각이 많이 든다.&lt;/p&gt;

&lt;h2 id=&quot;그래도-또-하겠지&quot;&gt;그래도 또 하겠지&lt;/h2&gt;</content><category term="단상" /><summary type="html">일을 하면서 가치가 있는 일을 하고 있는지 의구심이 생기고 있다</summary></entry><entry><title type="html">회사가 사원을 어떻게 대하느냐에 따라 능률이 달라집니다.</title><link href="https://lahuman.github.io/20200608/" rel="alternate" type="text/html" title="회사가 사원을 어떻게 대하느냐에 따라 능률이 달라집니다." /><published>2020-06-08T00:00:00+09:00</published><updated>2020-06-08T00:00:00+09:00</updated><id>https://lahuman.github.io/20200608</id><content type="html" xml:base="https://lahuman.github.io/20200608/">&lt;h1 id=&quot;요즘의-회사는-직원을-도구처럼-대하고-있다&quot;&gt;요즘의 회사는 직원을 도구처럼 대하고 있다.&lt;/h1&gt;

&lt;p&gt;입사 당시에는 이런 분위기까진 아니였는데… 요즘은 하루하루 실망하게 된다.&lt;/p&gt;

&lt;p&gt;당장 급한 프로젝트에 사람을 투입해서 책임지고 끝내라고 지시한다.&lt;/p&gt;

&lt;p&gt;정규직으로 일하는 사람들에게 계약직처럼 일하라고 종용한다. 
(웃긴건 계약직이 더 열심히 일할꺼라고 생각하는 근거는 뭘까?)&lt;/p&gt;

&lt;p&gt;근래에 퇴사한 사람만 4명이다. 계속 퇴사하는 사람들이 늘고 있다.&lt;/p&gt;

&lt;p&gt;또 이직을 꿈꾸는 사람들이 꽤 생겼다.&lt;/p&gt;

&lt;h2 id=&quot;아쉽지만-이-것-또한-지나가겠지&quot;&gt;아쉽지만 이 것 또한 지나가겠지…&lt;/h2&gt;</content><category term="단상" /><summary type="html">교체 가능한 도구로만 대하면 딱 그만큼만 일하고 싶어지네요.</summary></entry><entry><title type="html">Node] sequelize에서 mysql 8.0 로그인시 unknown plugin sha256_password 오류 발생</title><link href="https://lahuman.github.io/mysql_sha256_login_error/" rel="alternate" type="text/html" title="Node] sequelize에서 mysql 8.0 로그인시 unknown plugin sha256_password 오류 발생" /><published>2020-06-04T00:00:00+09:00</published><updated>2020-06-04T00:00:00+09:00</updated><id>https://lahuman.github.io/mysql_sha256_login_error</id><content type="html" xml:base="https://lahuman.github.io/mysql_sha256_login_error/">&lt;h1 id=&quot;node-sequelize에서-mysql-로그인시-unknown-plugin-sha256_password-오류-발생&quot;&gt;Node] sequelize에서 mysql 로그인시 unknown plugin sha256_password 오류 발생&lt;/h1&gt;

&lt;p&gt;개발서버를 구축하고 테스트를 진행중에 아래와 같은 오류가 발생하였습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node:56906) [DEP0097] DeprecationWarning: Using a domain property in MakeCallback is deprecated. Use the async_context variant of MakeCallback or the AsyncResource class instead.
2020-06-04 03:30:55.384 KST [error]: main - Server requests authentication using unknown plugin sha256_password. See TODO: add plugins doco here on how to configure or author authentication plugins.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;sha256_password 플러그인 설치를 해야 하는건가? 아니면 설정을 추가해야 하는건가 많이 찾아봤는데요.&lt;/p&gt;

&lt;p&gt;결론은 Mysql 8.0 이상에서 계정을 생성할때 비밀번호 생성을 아래와 같이 해서 발생한 문제였습니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;create user '사용자'@'%' identified by '비밀번호';
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;만약 계정을 생성했다면 다음 명령어로 비밀번호를 업데이트 하면 문제가 해결 됩니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ALTER user '사용자'@'%' IDENTIFIED WITH mysql_native_password BY '비밀번호';
flush privileges;

// 또는

use mysql;
update user set authentication_string=password('비밀번호'), plugin='mysql_native_password' where user='사용자';
flush privileges;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;mysql_native_password 은 기존 인증방법으로 보안 수준을 낮추지만, 이전 드라이버와 호환이 가능한 비밀번호 암호화 방식입니다.&lt;/p&gt;

&lt;h3 id=&quot;오늘의-삽질-끝&quot;&gt;오늘의 삽질 끝!&lt;/h3&gt;

&lt;h2 id=&quot;참고자료&quot;&gt;참고자료&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://oasisbase.tistory.com/43&quot;&gt;Sequelize와 mysql 연결 에러&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://to-dy.tistory.com/58&quot;&gt;MySQL 8.0 비밀번호 변경하기! (MySQL 5.7버전 이상)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="sequelize" /><category term="node" /><category term="error" /><summary type="html">Server requests authentication using unknown plugin sha256_password.</summary></entry><entry><title type="html">Session 인증이 들어간 Axois 통신 사용하기</title><link href="https://lahuman.github.io/cors_axios_session/" rel="alternate" type="text/html" title="Session 인증이 들어간 Axois 통신 사용하기" /><published>2020-06-04T00:00:00+09:00</published><updated>2020-06-04T00:00:00+09:00</updated><id>https://lahuman.github.io/cors_axios_session</id><content type="html" xml:base="https://lahuman.github.io/cors_axios_session/">&lt;h1 id=&quot;session-인증이-들아간-axios-통신-시-유의-사항&quot;&gt;Session 인증이 들아간 Axios 통신 시 유의 사항&lt;/h1&gt;

&lt;p&gt;기본적으로 Axios를 이용한 통신시 인증 쿠키값을 전달하기 위해서는 아래 설정을 추가 해줘야 합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const axios = require('axios');

// `withCredentials` indicates whether or not cross-site Access-Control requests
// should be made using credentials
// 기본 값은 false 입니다.
axios.defaults.withCredentials = true;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;그리고 API 서버와 통신을 하면, 다음과 같이 오류가 발생합니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Access to XMLHttpRequest at 'http://lahuman.github.io' from origin 'http://localhost:8080' has been blocked by CORS policy: The value of the 'Access-Control-Allow-Origin' header in the response must not be the wildcard '*' when the request's credentials mode is 'include'. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;해당 오류의 원인은 &lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/HTTP/CORS/Errors/CORSNotSupportingCredentials&quot;&gt;Reason: Credential is not supported if the CORS header ‘Access-Control-Allow-Origin’ is ‘*’&lt;/a&gt; 과 같습니다.&lt;/p&gt;

&lt;p&gt;인증 정보를 포함한 통신시 &lt;strong&gt;Access-Control-Allow-Origin&lt;/strong&gt; 값이 ‘*’ 일 경우 지원을 하지 않습니다.&lt;/p&gt;

&lt;h5 id=&quot;access-control-allow-origin-값이--로-설정된-통신-예제&quot;&gt;Access-Control-Allow-Origin 값이 * 로 설정된 통신 예제&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;assets/img/post_img/cors_start.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;결국 각 서버의 호스트 정보를 &lt;a href=&quot;https://www.npmjs.com/package/cors&quot;&gt;cors&lt;/a&gt; 설정에 추가 해야 합니다.&lt;/p&gt;

&lt;p&gt;아래는 인증 정보 샘플 입니다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const express = require(&quot;express&quot;);
const app = express();
const cors = require(&quot;cors&quot;);
app.use(
  cors({
    origin: [
      &quot;http://target.service.com&quot;,
      &quot;https://lahuman.github.io&quot;,
      &quot;http://localhost:8080&quot;,
    ],
    methods: &quot;GET,HEAD,PUT,PATCH,POST,DELETE&quot;,
    preflightContinue: false,
    optionsSuccessStatus: 204,
    credentials: true,
  })
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;access-control-allow-origin-값이-호스트에-알맞게-적용된-통신-예제&quot;&gt;Access-Control-Allow-Origin 값이 호스트에 알맞게 적용된 통신 예제&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;assets/img/post_img/cors_localhost.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;원인을-알고-나면-문제의-해결이-쉬워집니다&quot;&gt;원인을 알고 나면 문제의 해결이 쉬워집니다.&lt;/h2&gt;

&lt;h2 id=&quot;참고자료&quot;&gt;참고자료&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/HTTP/CORS/Errors/CORSNotSupportingCredentials&quot;&gt;Reason: Credential is not supported if the CORS header ‘Access-Control-Allow-Origin’ is ‘*’&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.npmjs.com/package/cors&quot;&gt;cors&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="axios" /><category term="session" /><category term="cors" /><summary type="html">그냥 사용하면 오류가 발생합니다.</summary></entry></feed>
