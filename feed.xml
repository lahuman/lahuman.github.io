<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="https://lahuman.github.io/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.5.2">Jekyll</generator><link href="https://lahuman.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://lahuman.github.io/" rel="alternate" type="text/html" /><updated>2017-09-21T16:58:04+09:00</updated><id>https://lahuman.github.io/</id><title type="html">lahuman</title><subtitle>열심히 사는 아저씨</subtitle><entry><title type="html">[2017-09-21] IntelliJ 를 사용하자</title><link href="https://lahuman.github.io/20170921-phase/" rel="alternate" type="text/html" title="[2017-09-21] IntelliJ 를 사용하자" /><published>2017-09-21T00:00:00+09:00</published><updated>2017-09-21T00:00:00+09:00</updated><id>https://lahuman.github.io/20170921-phase</id><content type="html" xml:base="https://lahuman.github.io/20170921-phase/">&lt;h1 id=&quot;intellij가-좋다고-하여-사용해보기를-몇번-시도를-했지만-늘-실패-하였다&quot;&gt;IntelliJ가 좋다고 하여 사용해보기를 몇번 시도를 했지만, 늘 실패 하였다.&lt;/h1&gt;

&lt;p&gt;일단 유료이기도 하고, 무료 버젼에서는 WAS와의 연동으 지원 하지 않기에, 사용이 불편하였다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;물론 요즘은 대부분 SpringBoot를 이용한 개발을 진행하여, Community 버젼을 이용하여도 충분하다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;하루 정도 사용해보고 불편한 점은 Eclipse에 익숙하여 그런지 UI 적응이 안되는 것과, 단축키이다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;다행이 인터넷에 &lt;a href=&quot;https://zeroturnaround.com/rebellabs/getting-started-with-intellij-idea-as-an-eclipse-user/4/&quot;&gt;Eclipse 사용자를 위한 IntelliJ 단축키&lt;/a&gt; 이미지가 있다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;이런건 가볍게 출력하여서 책상에 붙여 넣고 보면서 쓰다보면 손에 익을 꺼라 생각한다.&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;톰켓-설정-하기&quot;&gt;톰켓 설정 하기&lt;/h2&gt;

&lt;p&gt;WAS를 설정 하는 일은 조금 당황 스럽다. SERVER를 추가 하는 것이 아니라 RUN 설정에서 톰켓을 추가 하여야 한다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;우선 다음 그림과 같이 &lt;kbd&gt;Edit Configurations..&lt;/kbd&gt; 를 클릭한다.&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/config1.PNG&quot; /&gt;
	&lt;figcaption&gt;[그림 1] 실행 설정으로 이동&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;그리고 아래 그림에서 &lt;kbd&gt;+&lt;/kbd&gt;를 누르면 여러 종류의 실행 가능한 방식이 표출 된다 이중에 &lt;kbd&gt;Tomcat Server&lt;/kbd&gt;을 선택 하면 Local과 Remote가 표시된다.&lt;br /&gt;&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/config2.PNG&quot; /&gt;
	&lt;figcaption&gt;[그림 2] 새로운 실행 방식 추가&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Local을 누르면 Tomcat Server가 추가 되고 설정을 해야 한다. Context를 추가 하려면, 두번째 탭인&lt;kbd&gt;Deployment&lt;/kbd&gt;를 선택 하고 &lt;kbd&gt;+&lt;/kbd&gt; 버튼을 클릭 후, &lt;kbd&gt;Artifact...&lt;/kbd&gt; 버튼을 클릭 한다.&lt;br /&gt;&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/config3.PNG&quot; /&gt;
	&lt;figcaption&gt;[그림 3] Context 추가&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;선택을 하면 아래 그림과 같이 팝업이 뜨는데, 시작이 같은 이름의 프로젝트가 2개 뜬다. exploded가 붙은 프로젝트를 선택하면 된다.&lt;br /&gt;&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/config4.PNG&quot; /&gt;
	&lt;figcaption&gt;[그림 4] Context 추가&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;마지막으로 Application 의 Context 명만 설정하고 저장하면 설정은 끝난다.&lt;br /&gt;&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/config5.PNG&quot; /&gt;
	&lt;figcaption&gt;[그림 4] Context 명 설정&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;구동은 &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;F10&lt;/kbd&gt;를 누르면 선택이 나오거나, 첫번째 그림에서 화살표 표시를 누르면 된다.&lt;/p&gt;

&lt;h2 id=&quot;앞으로-몇일이나-쓸까&quot;&gt;앞으로 몇일이나 쓸까?&lt;/h2&gt;</content><category term="단상" /><summary type="html">IntelliJ 에서 톰켓 설정 하기</summary></entry><entry><title type="html">[2017-09-19] 믿음에 대하여…</title><link href="https://lahuman.github.io/20170919-phase/" rel="alternate" type="text/html" title="[2017-09-19] 믿음에 대하여..." /><published>2017-09-19T00:00:00+09:00</published><updated>2017-09-19T00:00:00+09:00</updated><id>https://lahuman.github.io/20170919-phase</id><content type="html" xml:base="https://lahuman.github.io/20170919-phase/">&lt;h1 id=&quot;함께-일하는-사람중에-신뢰-하는-사람이-얼마나-될까&quot;&gt;함께 일하는 사람중에 신뢰 하는 사람이 얼마나 될까?&lt;/h1&gt;

&lt;p&gt;하나의 조직에서 함께 일을 하는 사람을 동료라고 한다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;보통 우리는 동료들과 일주일에 40시간 이상을 함께 한다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;가끔은 잠자는 시간을 제외하고 가족과 보내는 시간보다 동료와 보내는 시간이 많을때도 있다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;이렇게 중요한 동료의 신뢰를 받는 것은 중요하다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;신뢰를 받는 가장 기본적인 방법은 &lt;strong&gt;말과 행동&lt;/strong&gt; 이다. &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;자신이 내뱉는 말을 잘 지키고, 업무 시간에 집중하는 모습을 보인다면 동료는 나를 신뢰 할수 있을 것이다.&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;그러니-말-조심-하자&quot;&gt;그러니 말 조심 하자.&lt;/h2&gt;</content><category term="단상" /><summary type="html">동료의 신뢰를 잃기는 쉬우나, 얻기는 힘들다.</summary></entry><entry><title type="html">[2017-09-15] 성취감에 대하여…</title><link href="https://lahuman.github.io/20170915-phase/" rel="alternate" type="text/html" title="[2017-09-15] 성취감에 대하여..." /><published>2017-09-15T00:00:00+09:00</published><updated>2017-09-15T00:00:00+09:00</updated><id>https://lahuman.github.io/20170915-phase</id><content type="html" xml:base="https://lahuman.github.io/20170915-phase/">&lt;h1 id=&quot;사원으로-들어와-임원까지-오르신-분과-대화를-하였다&quot;&gt;사원으로 들어와 임원까지 오르신 분과 대화를 하였다.&lt;/h1&gt;

&lt;p&gt;회사 내에서는 전설로 전해 지는 분으로, 사원으로 입사하셔서 임원까지 되신 분이 계신다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;이 분은 지금도 야근과 주말 출근은 기본으로 하시며 치열하게 살고 계신다. &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;회사가 이 분의 전부라고 느껴질정도로 모든 것을 걸고 열심히 일하신다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;나에게 주신 말씀 중 기억에 남는건,&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;나는 너희들이 안된다고 하는 게 이해가 안되, 그건 태도의 문제야! 안되는 일은 없어, 수단과 방법을 가리지 않고 너희가 맡은일을 완수 해야해. &lt;br /&gt;
그리고 너희가 그 일을 완수 했을 때  느낀 성취감은 이루 말할 수 없이 클꺼다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;난 이분을 존경은 하지만, 따라하고 싶지는 않다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;내 인생에 회사에서 이루는 성취감이 전부가 아니기 때문이다. &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;물론 나에게 돈을 주는 회사를 위해 열심히 일하고 노력 한다. &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;하지만 나에겐 가족, 친구, 지인들과 같이 소중한 사람과 함께 하는 시간도 중요하다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;요즘 &lt;a href=&quot;https://ko.wikipedia.org/wiki/YOLO&quot;&gt;YOLO&lt;/a&gt;가 유행이고, 기업에서는 구성원들에게 저녁있는 삶을 추구 한다지만…&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;내가 일하는 환경은 아직도 &lt;strong&gt;월화수목금금금&lt;/strong&gt; 이며, &lt;strong&gt;얼마나 많이 야근을 하는지&lt;/strong&gt;가 그 사람의 성과인 곳이다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;적어도 내가 느끼는 성취감이 동료의 고혈이 아닌 함께 느끼고 배우며 성장하는 성취감이고 싶다.&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;이번생에임원되긴글렀군&quot;&gt;이번생에임원되긴글렀군&lt;/h2&gt;</content><category term="단상" /><summary type="html">무언가를 성취 한다는 것은 더 나은 미래를 얻는 것일까?</summary></entry><entry><title type="html">[2017-09-12] 알고보면 지구는 티끌과 같은데…</title><link href="https://lahuman.github.io/20170912-phase/" rel="alternate" type="text/html" title="[2017-09-12] 알고보면 지구는 티끌과 같은데..." /><published>2017-09-12T00:00:00+09:00</published><updated>2017-09-12T00:00:00+09:00</updated><id>https://lahuman.github.io/20170912-phase</id><content type="html" xml:base="https://lahuman.github.io/20170912-phase/">&lt;h1 id=&quot;퇴근길에-유투브를-보았다&quot;&gt;퇴근길에 유투브를 보았다.&lt;/h1&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;//www.youtube.com/embed/DF1CB4x_XGQ&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;정말 세상이 작다는걸 느낀다.&lt;/p&gt;

&lt;h2 id=&quot;뭐-그래도-나는-내일-전쟁을-하겠지만&quot;&gt;뭐.. 그래도 나는 내일 전쟁을 하겠지만…&lt;/h2&gt;</content><category term="단상" /><summary type="html">인생무상, 무상무념</summary></entry><entry><title type="html">[2017-09-11] VirtualBox 특정 가상머신 PORT를 HOST Port에 Forward 하기.</title><link href="https://lahuman.github.io/virtualbox_port_forwarding/" rel="alternate" type="text/html" title="[2017-09-11] VirtualBox 특정 가상머신 PORT를 HOST Port에 Forward 하기." /><published>2017-09-11T00:00:00+09:00</published><updated>2017-09-11T00:00:00+09:00</updated><id>https://lahuman.github.io/virtualbox_port_forwarding</id><content type="html" xml:base="https://lahuman.github.io/virtualbox_port_forwarding/">&lt;h1 id=&quot;virtualbox-특정-포트를-외부에서-접근하기&quot;&gt;VirtualBox 특정 포트를 외부에서 접근하기&lt;/h1&gt;

&lt;p&gt;VirtualBox의 가상머신을 이용한 특정 서비스(SSH, DB, WEB, ETC)를 외부에 OPEN 하기 위한 가장 간단한 방법이다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;우선 &lt;strong&gt;가상머신에 대한 설치 &amp;amp; 설정은 본 글에서는 제외&lt;/strong&gt; 한다.&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;서버-네트워크-설정-변경&quot;&gt;서버 네트워크 설정 변경&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;가상 머신의 설정 정보를 클릭 한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/01]container_sessting.png&quot; /&gt;
	&lt;figcaption&gt;[그림 1] 가상 머신 설정 정보 확인&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;네트워크의 어댑터 1의 타입을 &lt;strong&gt;NAT&lt;/strong&gt;로 변경 한다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;고급 설정&lt;/strong&gt;을 눌러 &lt;strong&gt;포트 포워딩(P)&lt;/strong&gt; 버튼을 클릭 한다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/02]network_setting.png&quot; /&gt;
	&lt;figcaption&gt;[그림 2] 네트워크 &amp;gt; 어댑터 1 설정&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;포트 포워딩 규칙을 설정한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/03]portforward_info.png&quot; /&gt;
	&lt;figcaption&gt;[그림 3] 포트 포워딩 규칙 설정&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;호스트 IP는 다음 &lt;strong&gt;CMD 명령어&lt;/strong&gt;를 통해 확인 할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;nv&quot;&gt;$&amp;gt;&lt;/span&gt; ipconfig
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;게스트 IP는 가상머신에서 다음 명령어를 이용하여 알수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;nv&quot;&gt;$&amp;gt;&lt;/span&gt; ifconfig
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;figure&gt;
  	&lt;img src=&quot;https://lahuman.github.io/assets/img/phase/04]ifconfig.png&quot; /&gt;
  	&lt;figcaption&gt;[그림 3] 포트 포워딩 규칙 설정&lt;/figcaption&gt;
  &lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;접속이 안된다면 확인 사항&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;우선 가상 머신의 IPTABLE 에 설정을 확인 해야 한다. 다음 명령어는 간단하게 방화벽을 내리는 명령어다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nv&quot;&gt;$&amp;gt;&lt;/span&gt; service iptables stop
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;아주-간단하지만-유용하다&quot;&gt;아주 간단하지만 유용하다.&lt;/h3&gt;</content><category term="VirtualBox" /><category term="Port" /><category term="Forward" /><summary type="html">VirtualBox Port Forward</summary></entry><entry><title type="html">[2017-09-08] 타인에게 무관심해진다.</title><link href="https://lahuman.github.io/20170908-phase/" rel="alternate" type="text/html" title="[2017-09-08] 타인에게 무관심해진다." /><published>2017-09-08T00:00:00+09:00</published><updated>2017-09-08T00:00:00+09:00</updated><id>https://lahuman.github.io/20170908-phase</id><content type="html" xml:base="https://lahuman.github.io/20170908-phase/">&lt;h1 id=&quot;타인에-대한-무관심&quot;&gt;타인에 대한 무관심&lt;/h1&gt;

&lt;p&gt;내 주위 사람이 아닌 타인에게는 정말 무관심해진다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;물론 큰 사건 사고에 대하여는 공감하지만, &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;기본적으로는 타인에게 무관심하다.&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;그러면-안되는데-하면서도-나-살기-바쁘다는-핑계로-무관심하게-된다&quot;&gt;그러면 안되는데, 하면서도 나 살기 바쁘다는 핑계로 무관심하게 된다.&lt;/h2&gt;</content><category term="단상" /><summary type="html">내 주위 사람이 아닌 타인에게는 무관심해진다.</summary></entry><entry><title type="html">[2017-09-07] 꿈</title><link href="https://lahuman.github.io/20170907-phase/" rel="alternate" type="text/html" title="[2017-09-07] 꿈" /><published>2017-09-07T00:00:00+09:00</published><updated>2017-09-07T00:00:00+09:00</updated><id>https://lahuman.github.io/20170907-phase</id><content type="html" xml:base="https://lahuman.github.io/20170907-phase/">&lt;h1 id=&quot;꿈-1&quot;&gt;꿈 1&lt;/h1&gt;

&lt;p&gt;화장실을 갔는데 화장실이 똥투성이 었다.&lt;br /&gt;
나는 화장지를 뽑았더니, 똥이 뽑혔다.&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;꿈-2&quot;&gt;꿈 2&lt;/h1&gt;

&lt;p&gt;축구 경기가 한창이었는데, 한 선수가 찬 공이 밖으로 나가 굴러 갔다.&lt;br /&gt;
복도까지 굴러 갔는데 히딩크 아저씨가 공을 주었다.&lt;br /&gt;
게다가 심형래 아저씨의 전매측허 몸개그를 선보였다.&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;꿈-3&quot;&gt;꿈 3&lt;/h1&gt;

&lt;p&gt;흰회색 숲에서 나는 도망을 치고 있었다.&lt;br /&gt;
나무는 물론이고 땅도 밝은 회색(흰색에 가까운)이었다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;무엇에 쫓기는지 알지 못하였고 도망치기 바뻤다.&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;꿈-3은-예전에-꾸었던-꿈이다&quot;&gt;꿈 3은 예전에 꾸었던 꿈이다.&lt;/h3&gt;</content><category term="단상" /><summary type="html">요즘 꾸는 개꿈들</summary></entry><entry><title type="html">[2017-09-05] PostgreSQL Replication</title><link href="https://lahuman.github.io/pg_replication/" rel="alternate" type="text/html" title="[2017-09-05] PostgreSQL Replication" /><published>2017-09-05T00:00:00+09:00</published><updated>2017-09-05T00:00:00+09:00</updated><id>https://lahuman.github.io/pg_replication</id><content type="html" xml:base="https://lahuman.github.io/pg_replication/">&lt;h1 id=&quot;postgresql-내장-기능을-이용한-복제-스탠바이-서버-구축&quot;&gt;PostgreSQL 내장 기능을 이용한 복제 스탠바이 서버 구축&lt;/h1&gt;

&lt;h2 id=&quot;사전-지식&quot;&gt;사전 지식&lt;/h2&gt;

&lt;h3 id=&quot;wal-write-ahead-log&quot;&gt;&lt;a href=&quot;https://ko.wikipedia.org/wiki/%EB%A1%9C%EA%B7%B8_%EC%84%A0%ED%96%89_%EA%B8%B0%EC%9E%85&quot;&gt;WAL-Write Ahead Log&lt;/a&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;마스터 서버에서 발생하는 모든 작업 로그 생성&lt;/li&gt;
  &lt;li&gt;생성된 로그를 슬레이브 서버로 전달&lt;/li&gt;
  &lt;li&gt;슬레이브 서버에서 받은 로그의 복원(재실행)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위와 같은 동작으로 마스터 서버와 같은 스키마/데이터를 가지는 복제 서버를 생성한다.
이 마스터 서버의 로그를 &lt;strong&gt;WAL&lt;/strong&gt; 이라고 하며, 로그 위치는 &lt;strong&gt;$PG_SQL/data/pg_xlog&lt;/strong&gt; 에 쌓인다.&lt;/p&gt;

&lt;h3 id=&quot;wal-전달-방식&quot;&gt;WAL 전달 방식&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Log-Shipping 방식 : &lt;kbd&gt;pg_xlog&lt;/kbd&gt; 안의 WAL 파일 자체를 슬레이브 서버로 전달(File Copy)&lt;/li&gt;
  &lt;li&gt;Streaming 방식 : WAL 파일 저장 여부와 관계 없이 로그의 내용을 슬레이브 서버로 전달(Streaming)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;log-shipping&quot;&gt;Log-Shipping&lt;/h4&gt;

&lt;p&gt;마스터 서버에서 저장된 WAL 파일의 크기를 지정된 사이즈 많큼 채워야 슬레이브 서버로 전송, 채워지는 시간동안 마스터/슬레이브 서버의 데이터가 어긋남&lt;br /&gt;
마스터 서버의 장애 발생시, WAL 파일을 다 채우지 못하여 전달되지 않을경우 데이터의 유실 있음&lt;/p&gt;

&lt;h3 id=&quot;streaming&quot;&gt;Streaming&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;Streaming 방식은 PostgreSQL 9.0 이상에서 사용이 가능하다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;두 서버 간의 네트워크 문제가 없다는 가정하에, 거의 실시간으로 동작(1초 미만의 작은 지연 발생 가능)&lt;br /&gt;
슬레이브 서버의 긴 장애가 발생하여 문제가 생길 경우, 유실된 데이터 복구 방법은 &lt;strong&gt;슬레이브 서버를 처음부터 다시 구축&lt;/strong&gt; 해야한다.&lt;br /&gt;
따라서 Streaming 방식을 사용하더라도, 이와 같은 문제를 피하기 위해서 Log-Shipping 방식을 적용해 놓는 것이 좋다.&lt;/p&gt;

&lt;h2 id=&quot;streaming-replication-적용&quot;&gt;Streaming Replication 적용&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://lahuman.github.io/postgreesql_install/&quot;&gt;PostgreSQL 설치는 기존에 작성된 게시글 참조&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;kbd&gt;마스터&lt;/kbd&gt;와 &lt;kbd&gt;슬레이브&lt;/kbd&gt; 2대의 서버가 존재 하는 상테에서 진행 된다.&lt;br /&gt;
실행 계정은 설치 할때 생성한 &lt;kbd&gt;postgres&lt;/kbd&gt; 이다.&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;복제-전용-유저-생성&quot;&gt;복제 전용 유저 생성&lt;/h3&gt;

&lt;p&gt;Streaming 방식 적용을 위해 슬레이브 서버에서 마스터 서버에 접근할 Replication 전용 유저를 생성한다.&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;마스터-서버-설정&quot;&gt;마스터 서버 설정&lt;/h3&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ROLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repluser&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;REPLICATION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PASSWORD&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'PASS'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LOGIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;방금 생성한 계정의 접근 권한을 설정하기 위해 &lt;kbd&gt;$PG_SQL/data/pg_hba.conf&lt;/kbd&gt; 파일에 다음을 추가 한다.&lt;br /&gt;
&lt;strong&gt;원본 문서에서는 &lt;kbd&gt;md5&lt;/kbd&gt;로 되어 있으나 단순하게 trust로 변경&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;host    replication     repluser     192.168.0.0/32      trust
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;복제를 위한 &lt;kbd&gt;$PG_SQL/data/postgresql.conf&lt;/kbd&gt; 설정 변경&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;listen_addresses &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'*'&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# 인증/권한 관리는 pg_hba.conf 파일에서 진행&lt;/span&gt;
wal_level &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; hot_standby  &lt;span class=&quot;c&quot;&gt;# 대기 서버에 읽기전용 작업 가능&lt;/span&gt;
max_wal_senders &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2  &lt;span class=&quot;c&quot;&gt;# WAL 파일을 전송할 수 있는 최대 서버 수&lt;/span&gt;
wal_keep_segments &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 32  &lt;span class=&quot;c&quot;&gt;# 마스터 서버 디렉토리에 보관할 최근 WAL 파일의 수&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;서버 기동 명령어 &lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 기동&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/bin/pg_ctl -D &lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/data -l logfile start

&lt;span class=&quot;c&quot;&gt;# 재시작&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/bin/pg_ctl -D &lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/data -l logfile restart

&lt;span class=&quot;c&quot;&gt;# 종료&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/bin/pg_ctl -D &lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/data -l logfile stop
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;슬레이브-서버-설정&quot;&gt;슬레이브 서버 설정&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;마스터 서버 basebackup&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;kbd&gt;pg_basebackup&lt;/kbd&gt; 명령어를 이용하여 최초 백업을 진행 한다.&lt;br /&gt;
이 명령은 마스터 서버의 &lt;kbd&gt;$PG_SQL/data&lt;/kbd&gt; 디렉토리를 통째로 슬레이브 서버의 &lt;kbd&gt;$PG_SQL/data&lt;/kbd&gt; 디렉토리로 복제/복원 하는 명령이다.&lt;br /&gt;
&lt;strong&gt;이 명령을 실행하기 전에 슬레이브서버에 &lt;kbd&gt;$PG_SQL/data&lt;/kbd&gt;는 비어 있어야 한다.&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/bin/pg_basebackup -h &lt;span class=&quot;nv&quot;&gt;$MASTER_IP&lt;/span&gt; -D &lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/data -U repluser -v -P --xlog-method&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;stream
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;설정 변경&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;kbd&gt;$PG_SQL/data/postgresql.conf&lt;/kbd&gt; 설정 변경&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;listen_addresses &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'*'&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# 인증/권한 관리는 pg_hba.conf 파일에서 진행&lt;/span&gt;
hot_standby &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; on  &lt;span class=&quot;c&quot;&gt;# 대기 서버에 읽기전용 작업 가능&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;kbd&gt;$PG_SQL/data/recovery.conf&lt;/kbd&gt; 파일을 추가 하고 다음의 내용을 작성한다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;standby_mode &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; on
primary_conninfo &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'host=MASTER_IP port=5432 user=repluser password=password'&lt;/span&gt;
trigger_file &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/path/of/triggerfile'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# failover시 마스터 승격을 위한 트리거 파일&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;kbd&gt;primary_conninfo&lt;/kbd&gt; 옵션 정보로 마스터 서버에 접속해 실시간 WAL 파일을 전달 받는다. &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;슬레이브 서버를 마스터 서버로 전환하는 방법은 두가지가 있는데, &lt;kbd&gt;pg_ctl promote&lt;/kbd&gt; 명령어를 이용하는 방법과 &lt;kbd&gt;recovery.conf&lt;/kbd&gt;파일의 &lt;kbd&gt;trigger_file&lt;/kbd&gt; 옵션을 이용하는 방법이다.&lt;br /&gt;
단순하게 해당 경로에 파일이 생성되었을 때,(&lt;kbd&gt;touch&lt;/kbd&gt; 등으로) 스텐바이 서버가 새로운 마스터로 승격된다.&lt;br /&gt;
&lt;strong&gt;슬레이브 서버를 마스터로 변경할때는 기존 마스터가 확실히가 다운된 상태인지 확인 해야 한다.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;서버 기동 명령어 &lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# -p PORT&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -D 데이터파일 위치&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &amp;amp; 백그라운드 실행&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/postmaster -p 5433 -D &lt;span class=&quot;nv&quot;&gt;$PG_SQL&lt;/span&gt;/data &amp;amp;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;failback&quot;&gt;Failback&lt;/h2&gt;

&lt;p&gt;기본적으로 Failback을 위한 특별한 기능이 제공되지 않는다. 따라서 다음과 같은 단계를 거쳐야 한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;마스터 서버 장애가 복구 되면 이 서버를 슬레이브 서버로 구축&lt;/li&gt;
  &lt;li&gt;새 마스터 서버(기존 슬레이브)를 강제로 다운&lt;/li&gt;
  &lt;li&gt;새로 구축된 슬레이브(구 마스터)를 마스터 서버로 승격&lt;/li&gt;
  &lt;li&gt;슬레이브 서버 재 구축&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;이외의 방법은 &lt;a href=&quot;https://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling&quot;&gt;PostgreSQL Wiki-Replication, Clustering, and Connection Pooling&lt;/a&gt;에서 볼 수 있다.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;참고-자료&quot;&gt;참고 자료&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://qodot.github.io/post/postgresql-replication-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0/&quot;&gt;PostgreSQL Replication 구축하기&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;http://linux.systemv.pe.kr/postgresql-replication-log-shipping&quot;&gt;PostgreSQL Replication – Log Shipping&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://linux.systemv.pe.kr/postgresql-9-x-replication-streaming-log&quot;&gt;Postgresql 9.x Replication – Streaming Log&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;</content><category term="PostgreSQL" /><category term="HA구성" /><summary type="html">PostgreSQL에서 기본으로 제공하는 Replication 설정</summary></entry><entry><title type="html">[2017-09-04] 자기 얼굴에 금칠 하는 건 하지 말자</title><link href="https://lahuman.github.io/20170904-phase/" rel="alternate" type="text/html" title="[2017-09-04] 자기 얼굴에 금칠 하는 건 하지 말자" /><published>2017-09-04T00:00:00+09:00</published><updated>2017-09-04T00:00:00+09:00</updated><id>https://lahuman.github.io/20170904-phase</id><content type="html" xml:base="https://lahuman.github.io/20170904-phase/">&lt;h1 id=&quot;본인이-잘났다고-큰소리-치고-다니는-분을-보면&quot;&gt;본인이 잘났다고 큰소리 치고 다니는 분을 보면…&lt;/h1&gt;

&lt;p&gt;그냥 &lt;strong&gt;광대&lt;/strong&gt; 같이 느껴진다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;정말 잘난 사람은 본인 스스로를 뽐내지 않아도 빛이 난다고…&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;존경받기 위해서는 남부터 존경 해야 한다.&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;나는 누구이건간에 사람의 권리를 짓밟는 사람은 절대로 존경하지 않는다. -랄프 잉거솔&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;적어도-존경을-받고-싶으면-남을-무시해서는-안된다&quot;&gt;적어도 존경을 받고 싶으면 남을 무시해서는 안된다.&lt;/h3&gt;</content><category term="단상" /><summary type="html">광대 처럼 보인다.</summary></entry><entry><title type="html">[2017-08-28] 시험을 망쳤다.</title><link href="https://lahuman.github.io/20170828-phase/" rel="alternate" type="text/html" title="[2017-08-28] 시험을 망쳤다." /><published>2017-08-28T00:00:00+09:00</published><updated>2017-08-28T00:00:00+09:00</updated><id>https://lahuman.github.io/20170828-phase</id><content type="html" xml:base="https://lahuman.github.io/20170828-phase/">&lt;h1 id=&quot;그날까지-진행되는-스트레스가-크지-막상-지나고-나면-아무렇지-안다&quot;&gt;그날까지 진행되는 스트레스가 크지, 막상 지나고 나면 아무렇지 안다.&lt;/h1&gt;

&lt;p&gt;시험은 그냥 지나가는 수단일 뿐이고, 떨어지면 다시 보면 된다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;다만, 열심히 준비를 하였는지에 따라 아쉬운 정도가 다르다.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;떨어졌다고 좌절 하지말고 왜 떨어졌는지 체크하고 다시 준비 하자&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;모든-수험생-분들-화이팅&quot;&gt;모든 수험생 분들 화이팅!&lt;/h2&gt;</content><category term="단상" /><summary type="html">그래도 시원하다.</summary></entry></feed>
