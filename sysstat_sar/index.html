<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>sar 툴 설치 하기 &#8211; lahuman</title> <meta name="description" content="열심히 사는 아저씨"> <meta name="keywords" content="sar, monitoring"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://lahuman.github.io/assets/img/logo.png"> <meta name="twitter:title" content="sar 툴 설치 하기"> <meta name="twitter:description" content="시스템 모니터링 프로그램"> <!-- Open Graph --> <meta property="og:locale" content="ko_KR"> <meta property="og:type" content="article"> <meta property="og:title" content="sar 툴 설치 하기"> <meta property="og:description" content="시스템 모니터링 프로그램"> <meta property="og:url" content="https://lahuman.github.io/sysstat_sar/"> <meta property="og:site_name" content="lahuman"> <meta property="og:image" content="https://lahuman.github.io/assets/img/logo.png"> <link rel="canonical" href="https://lahuman.github.io/sysstat_sar/"> <link href="https://lahuman.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="lahuman Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://lahuman.github.io/assets/css/main.css"> <!-- JS --> <script src="https://lahuman.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://lahuman.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://lahuman.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://lahuman.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://lahuman.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://lahuman.github.io/favicon.png" /> <link rel="shortcut icon" href="https://lahuman.github.io/favicon.ico" /> <!-- mermaid --> <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script> <script>mermaid.initialize({startOnLoad:true});</script> <!-- Background Image --> <style type="text/css">body {background-image:url(https://lahuman.github.io/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://lahuman.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://lahuman.github.io/assets/img/logo.png" alt="lahuman photo" class="author-photo"> <h4>lahuman</h4> <p>열심히 사는 아저씨</p> </li> <li><a href="https://lahuman.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://facebook.com/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://linkedin.com/in/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://lahuman.github.io/posts/">All Posts</a></li> <li><a href="https://lahuman.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="https://lahuman.github.io/projects/" >Projects</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>sar 툴 설치 하기</h1> <h4>10 Dec 2021</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~3 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://lahuman.github.io/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="sar를-활용해서-시스템-모니터링을-해보자">sar를 활용해서 시스템 모니터링을 해보자!</h1> <h2 id="1-sarsystecm-activity-reporter-이하-sar-란">1. sar(Systecm Activity Reporter 이하 sar) 란?</h2> <ul> <li>sar 는 리눅스에서 유용하게 쓰는 시스템 모니터링 프로그램입니다.</li> <li>모니터링 대상이 상당히 넓은 편이며 기본값은 CPU 활동에 대한 통계를 출력합니다.</li> <li>각종 활동에 대한 통계를 다른프로그램을 이용하여 파일로 저장하고 통계치를 리포팅 하는 기능을 제공합니다.</li> <li>sadc에서 생성한 daily activity 파일을 읽어서 보고서를 작성하기도 하고 시스템의 활동 상황을 수집 할 수도 있습니다.</li> </ul> <h2 id="2-sar-명령어로-모니터링-가능한-항목">2. sar 명령어로 모니터링 가능한 항목</h2> <ul> <li>I/O 전송량</li> <li>페이징</li> <li>프로세스 생성 숫자</li> <li>블락 디바이스 활동</li> <li>인터럽트</li> <li>네트워크 통계</li> <li>run 큐 및 시스템 부하 평균</li> <li>메모리와 스왑 공간 활용 통계</li> <li>메모리 통계</li> <li>CPU 이용도</li> <li>특정 프로세스에 대한 CPU 이용도</li> <li>inode, 파일, 기타 커널 테이블에 대한 상태</li> <li>시스템 스위칭 활동(context switch)</li> <li>스와핑 통계</li> <li>특정 프로세스 통계</li> <li>특정 프로세스의 자식 프로세스 통계</li> <li>TTY 디바이스 활동</li> </ul> <h2 id="3-설치">3. 설치</h2> <p>sar 툴은 <a href="http://sebastien.godard.pagesperso-orange.fr/download.html">sysstat</a> 패키지를 설치하면 포함되어 있습니다</p> <h3 id="sysstat-이란">sysstat 이란?</h3> <p>리눅스 성능 측정 도구 패키지입니다. 해당 패키지에는 아래와 같은 성능 분석 툴을 제공합니다. sar을 사용하기 위해선 sysstat 설치해야 합니다.</p> <h4 id="sysstat-패키지는-다음을-포함하고-있습니다">sysstat 패키지는 다음을 포함하고 있습니다.</h4> <ul> <li>sar : cpu, memory, network, diks io 등 지표를 수치화하며 파일로 저장.</li> <li>iostat : disk io에 지표 측정</li> <li>mpstat : cpu 지표 측정</li> <li>tapestat : tape 드라이버의 IO 지표 측정</li> <li>pidstat : 특정 프로세스의 CPU 및 스레드 정보 지표 측정</li> <li>cifsiostat : cifs 파일 시스템 지표 측정</li> </ul> <h3 id="설치-명령어">설치 명령어</h3> <p>일반적으로 패키지 매니저를 통해서 쉽게 설치가 가능합니다.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt-get install sysstat
</code></pre></div></div> <h2 id="4-실행">4. 실행</h2> <p>여러가지 sar를 활용한 명령어가 있지만, 간단하게 실시간으로 메모리와 CPU 사용을 확인하는 명령어를 작성해봅니다.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># -u는 CPU 사용율을 확인 합니다.
# 공통적으로 1의 뜻은 1초마다 갱신을 3은 3회를 의미 합니다. 
$ sar -u 1 3
Linux 5.10.63-v8+ (raspberrypi) 	2021년 12월 10일 	_aarch64_	(4 CPU)

11시 09분 25초     CPU     %user     %nice   %system   %iowait    %steal     %idle
11시 09분 26초     all      2.27      0.00      1.01      0.00      0.00     96.73
11시 09분 27초     all      1.75      0.00      0.75      0.00      0.00     97.49
11시 09분 28초     all      2.24      0.00      0.75      0.00      0.00     97.01
평균값:            all      2.09      0.00      0.83      0.00      0.00     97.08

# -q는 Load Average를 확인 합니다. 실행 큐에 쌓여 있는 프로세스 수, 시스템 상의 프로세스 사이즈, Load Average 등을 참조 할 수 있습니다.
$ sar -q 1 3
Linux 5.10.63-v8+ (raspberrypi) 	2021년 12월 10일 	_aarch64_	(4 CPU)

11시 10분 07초   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked
11시 10분 08초         0       697      0.00      0.00      0.00         0
11시 10분 09초         0       697      0.00      0.00      0.00         0
11시 10분 10초         0       697      0.00      0.00      0.00         0
평균값:                0       697      0.00      0.00      0.00         0

# -r은 메모리 사용 현황 확인
$ sar -r 1 3
Linux 5.10.63-v8+ (raspberrypi) 	2021년 12월 10일 	_aarch64_	(4 CPU)

11시 12분 54초 kbmemfree   kbavail kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty
11시 12분 55초   1494172   4980124   2479504     31.72    452392   2869548   8294984    104.75   1814580   3887664         8
11시 12분 56초   1493668   4979620   2479484     31.72    452392   2870064   8295500    104.75   1814580   3887660         8
11시 12분 57초   1493668   4979620   2479480     31.72    452392   2870060   8295496    104.75   1814580   3887660         8
평균값:          1493836   4979788   2479489     31.72    452392   2869891   8295327    104.75   1814580   3887661         8

# -W은 스왑 발생상황 확인
$ sar -W 1 3
Linux 5.10.63-v8+ (raspberrypi) 	2021년 12월 10일 	_aarch64_	(4 CPU)

11시 13분 06초  pswpin/s pswpout/s
11시 13분 07초      0.00      0.00
11시 13분 08초      0.00      0.00
11시 13분 09초      0.00      0.00
평균값:             0.00      0.00

</code></pre></div></div> <p>더 많은 옵션은 아래 참고자료를 확인해주세요. :)</p> <h2 id="참고-자료">참고 자료</h2> <ul> <li><a href="https://blog.cafe24.com/2005">[리눅스] sar 명령어를 이용한 시스템 모니터링</a></li> <li><a href="https://brunch.co.kr/@lars/9">sar sysstat 리눅스 지표 분석 도구</a></li> </ul> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://lahuman.github.io/tags/#sar" title="Pages tagged sar" class="tag"><span class="term">sar</span></a><a href="https://lahuman.github.io/tags/#monitoring" title="Pages tagged monitoring" class="tag"><span class="term">monitoring</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://lahuman.github.io/sysstat_sar/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://lahuman.github.io/sysstat_sar/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://lahuman.github.io/sysstat_sar/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> <ins class="kakao_ad_area" style="display:none;" data-ad-unit = "DAN-ubp67fs9s850" data-ad-width = "320" data-ad-height = "100"></ins> <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://lahuman.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.goup.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="https://lahuman.github.io/assets/js/scripts.js"></script> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74095083-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-74095083-1'); </script> <script type="text/javascript"> var disqus_shortname = 'daniels-blog'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
