<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>Rancher로 Kubernetes 설치 & 관리 하기 &#8211; lahuman</title> <meta name="description" content="열심히 사는 아저씨"> <meta name="keywords" content="kubernetes, rancher"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://lahuman.github.io/assets/img/logo.png"> <meta name="twitter:title" content="Rancher로 Kubernetes 설치 & 관리 하기"> <meta name="twitter:description" content="오메 신세계다!!!"> <!-- Open Graph --> <meta property="og:locale" content="ko_KR"> <meta property="og:type" content="article"> <meta property="og:title" content="Rancher로 Kubernetes 설치 & 관리 하기"> <meta property="og:description" content="오메 신세계다!!!"> <meta property="og:url" content="https://lahuman.github.io/rancher/"> <meta property="og:site_name" content="lahuman"> <meta property="og:image" content="https://lahuman.github.io/assets/img/logo.png"> <link rel="canonical" href="https://lahuman.github.io/rancher/"> <link href="https://lahuman.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="lahuman Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://lahuman.github.io/assets/css/main.css"> <!-- JS --> <script src="https://lahuman.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://lahuman.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://lahuman.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://lahuman.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://lahuman.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://lahuman.github.io/favicon.png" /> <link rel="shortcut icon" href="https://lahuman.github.io/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(https://lahuman.github.io/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://lahuman.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://lahuman.github.io/assets/img/logo.png" alt="lahuman photo" class="author-photo"> <h4>lahuman</h4> <p>열심히 사는 아저씨</p> </li> <li><a href="https://lahuman.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://facebook.com/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://github.com/lahuman" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://lahuman.github.io/posts/">All Posts</a></li> <li><a href="https://lahuman.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="https://lahuman.github.io/projects/" >Projects</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>Rancher로 Kubernetes 설치 & 관리 하기</h1> <h4>09 Jan 2020</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~2 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://lahuman.github.io/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="rancher로-kubernetes-설치--관리-하기">Rancher로 Kubernetes 설치 &amp; 관리 하기</h1> <p>어제 쿠버네티스를 한땀 한땀 설치하였다. 설정을 하려고 보니 생각보다 손이 많이가서 오늘 진행하기로 하였다.</p> <h2 id="하지만">하지만!</h2> <p>쿠버네티스 경험자인 동료분이 Rancher를 활용하면 쉽게 설치를 할 수 있다고 추천해주셨다.</p> <h2 id="rancher란">Rancher란?</h2> <blockquote> <p>Rancher is a complete software stack for teams adopting containers. It addresses the operational and security challenges of managing multiple Kubernetes clusters across any infrastructure, while providing DevOps teams with integrated tools for running containerized workloads.</p> </blockquote> <p>Rancher는 컨테이너를 채택한 팀을위한 완벽한 소프트웨어 스택입니다. 모든 인프라에서 여러 Kubernetes 클러스터를 관리해야하는 운영 및 보안 문제를 해결하는 동시에 DevOps 팀에 컨테이너화 된 워크로드 실행을위한 통합 도구를 제공합니다.</p> <h2 id="설치-하기">설치 하기</h2> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker run -d --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher
</code></pre></div></div> <p>이로서 Rancher가 설치 되었다.</p> <p>만약 아래와 같은 오류가 발생한다면,</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker run -d --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher
6ab639e217cccebed6fb4bdd8aa4049e247740b4f00c519c5294fe1ad40c9239
docker: Error response from daemon: driver failed programming external connectivity on endpoint thirsty_volhard (58f908f66cd6a307f6c0ce111fe5b755049a76df806c0ed85d53cfe3e24cce6b):  (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 443 -j DNAT --to-destination 172.17.0.2:443 ! -i docker0: iptables: No chain/target/match by that name.
</code></pre></div></div> <p>docker 서비스를 재기동 후 다시 설치하면 된다.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ systemctl restart docker
</code></pre></div></div> <p>Rancher는 도커 환경에서 실행되며 쿠버네티스를 도커 환경에서 구축한다.</p> <p>이후 웹 화면을 띄우면 admin 비밀번호를 설정 하도록 한다.</p> <h2 id="add-cluster">Add Cluster</h2> <p>첫화면을 들어갔다면 먼저 Add Cluster메뉴를 선택해서 쿠버네티스를 구성한다.</p> <p><img src="/assets/img/post_img/rancher-cluster.png" alt="" /></p> <p>서버의 디스크를 활용할 예정이라면, <strong>From existing nodes (Custom)</strong> 버튼을 클릭한다.</p> <p><img src="/assets/img/post_img/rancher-addcluster-1.png" alt="" /></p> <p>Cluster Name만 주고 Next 버튼을 클릭해도 된다.</p> <p><img src="/assets/img/post_img/rancher-addcluster-2.png" alt="" /></p> <p>이후 docker 명령어가 화면에 표시 된다.</p> <p>첫 2개의 체크 박스는 마스터 노드를 뜻한다.</p> <p><img src="/assets/img/post_img/rancher-master.png" alt="" /></p> <p>마지막 체크 박스인 worker는 pod을 가진 node를 뜻한다.</p> <p><img src="/assets/img/post_img/rancher-worker.png" alt="" /></p> <p>물론 3개의 체크박스를 모두 선택하고 명령어를 실행해도 된다.</p> <p><img src="/assets/img/post_img/rancher-runcommand.png" alt="" /></p> <p>명령어를 실행하고 난 이후 결과는 다음과 같다. (좀 많은 시간이 걸린다.)</p> <p><img src="/assets/img/post_img/rancher-active.png" alt="" /></p> <p>이제 활성화된 클러스터를 클릭 하면 다음과 같은 대시 보드를 확인 할수 있다.</p> <p><img src="/assets/img/post_img/rancher-dashboard.png" alt="" /></p> <p>이후 쿠버네티스 관련 명령어를 웹에서 <strong>Launch Kubectl</strong> 명령어를 이용해서 실행해볼 수 있다.</p> <p>마지막으로 <strong>kubectl get all</strong>을 실행한 결과이다.</p> <p><img src="/assets/img/post_img/rancher-shell.png" alt="" /></p> <h2 id="오늘-엄청-배움">오늘 엄청 배움!!!</h2> <p><img src="/assets/img/post_img/rancher-worker.png" alt="" /></p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://lahuman.github.io/tags/#kubernetes" title="Pages tagged kubernetes" class="tag"><span class="term">kubernetes</span></a><a href="https://lahuman.github.io/tags/#rancher" title="Pages tagged rancher" class="tag"><span class="term">rancher</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://lahuman.github.io/rancher/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://lahuman.github.io/rancher/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://lahuman.github.io/rancher/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://lahuman.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.goup.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://lahuman.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="https://lahuman.github.io/assets/js/scripts.js"></script> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74095083-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-74095083-1'); </script> <script type="text/javascript"> var disqus_shortname = 'daniels-blog'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
